-- LooP Menu SP v1.3
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

-- –°–µ—Ä–≤–∏—Å—ã
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local humanoid = nil
local settings = {
    Speed = 16,
    JumpHeight = 50,
    FOV = 70
}
local dragging = false
local dragStart, startPos
local enabled = true
local connections = {}
local saveFileName = "1qluaseting/LooPMenuSP.json"

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–æ–≤
local activeSlider = nil
local sliding = false

-- –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
local function ensureSettingsFolder()
    if not isfolder("1qluaseting") then
        makefolder("1qluaseting")
    end
end

-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
local function saveSettings()
    ensureSettingsFolder()
    
    local success, result = pcall(function()
        local jsonData = HttpService:JSONEncode(settings)
        writefile(saveFileName, jsonData)
        return true
    end)
    
    if success then
        if SaveButton then
            SaveButton.Text = "‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!"
            task.wait(0.8)
            SaveButton.Text = "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
        end
        return true
    else
        print("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:", result)
        return false
    end
end

-- –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ JSON
local function loadSettings()
    ensureSettingsFolder()
    
    if not isfile(saveFileName) then
        return false
    end
    
    local success, result = pcall(function()
        local jsonData = readfile(saveFileName)
        local loadedSettings = HttpService:JSONDecode(jsonData)
        
        settings.Speed = tonumber(loadedSettings.Speed) or 16
        settings.JumpHeight = tonumber(loadedSettings.JumpHeight) or 50
        settings.FOV = tonumber(loadedSettings.FOV) or 70
        
        return true
    end)
    
    if success then
        if LoadButton then
            LoadButton.Text = "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ!"
            task.wait(0.8)
            LoadButton.Text = "üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å"
        end
        return true
    else
        print("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:", result)
        return false
    end
end

-- –°–æ–∑–¥–∞–µ–º GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LooPMenuSP"
ScreenGui.DisplayOrder = 999
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0, 50, 0, 50)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BackgroundTransparency = 0.05
MainFrame.BorderSizePixel = 0
MainFrame.Active = true

-- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∏ —Ç–µ–Ω—å
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(60, 60, 70)
UIStroke.Thickness = 2
UIStroke.Parent = MainFrame

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
Title.Text = "LooP Menu SP"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 22
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Center

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 10)
TitleCorner.Parent = Title

-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -40, 0, 7)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "‚úï"

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 17)
CloseCorner.Parent = CloseButton

-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
local SettingsContainer = Instance.new("ScrollingFrame")
SettingsContainer.Name = "SettingsContainer"
SettingsContainer.Size = UDim2.new(1, -20, 0, 220)
SettingsContainer.Position = UDim2.new(0, 10, 0, 60)
SettingsContainer.BackgroundTransparency = 1
SettingsContainer.ScrollBarThickness = 4
SettingsContainer.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
SettingsContainer.CanvasSize = UDim2.new(0, 0, 0, 240)

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
local function createSetting(parent, name, yPosition, minValue, maxValue, defaultValue, color)
    local frame = Instance.new("Frame")
    frame.Name = name .. "Frame"
    frame.Size = UDim2.new(1, 0, 0, 75)
    frame.Position = UDim2.new(0, 0, 0, yPosition)
    frame.BackgroundTransparency = 1
    
    local label = Instance.new("TextLabel")
    label.Name = name .. "Label"
    label.Size = UDim2.new(0.65, 0, 0, 25)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = name .. ": " .. defaultValue
    label.TextColor3 = Color3.fromRGB(230, 230, 230)
    label.TextSize = 16
    label.Font = Enum.Font.Gotham
    label.TextXAlignment = Enum.TextXAlignment.Left
    
    local textBox = Instance.new("TextBox")
    textBox.Name = name .. "Box"
    textBox.Size = UDim2.new(0.3, 0, 0, 30)
    textBox.Position = UDim2.new(0.7, 0, 0, 0)
    textBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    textBox.TextSize = 14
    textBox.PlaceholderText = "–ó–Ω–∞—á–µ–Ω–∏–µ"
    textBox.Text = tostring(defaultValue)
    textBox.ClearTextOnFocus = false
    
    local boxCorner = Instance.new("UICorner")
    boxCorner.CornerRadius = UDim.new(0, 6)
    boxCorner.Parent = textBox
    
    local sliderBackground = Instance.new("Frame")
    sliderBackground.Name = name .. "SliderBg"
    sliderBackground.Size = UDim2.new(1, 0, 0, 10)
    sliderBackground.Position = UDim2.new(0, 0, 0, 35)
    sliderBackground.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    sliderBackground.BorderSizePixel = 0
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 5)
    sliderCorner.Parent = sliderBackground
    
    local slider = Instance.new("Frame")
    slider.Name = name .. "Slider"
    slider.Size = UDim2.new(1, 0, 0, 20)
    slider.Position = UDim2.new(0, 0, 0, 30)
    slider.BackgroundTransparency = 1
    
    local fill = Instance.new("Frame")
    fill.Name = name .. "Fill"
    fill.Size = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 1, 0)
    fill.Position = UDim2.new(0, 0, 0, 0)
    fill.BackgroundColor3 = color
    fill.BorderSizePixel = 0
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 5)
    fillCorner.Parent = fill
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Name = name .. "Value"
    valueLabel.Size = UDim2.new(0, 40, 0, 20)
    valueLabel.Position = UDim2.new(1, -45, 0, 45)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(defaultValue)
    valueLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    valueLabel.TextSize = 14
    valueLabel.Font = Enum.Font.Gotham
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    
    fill.Parent = sliderBackground
    valueLabel.Parent = frame
    sliderBackground.Parent = frame
    textBox.Parent = frame
    label.Parent = frame
    frame.Parent = parent
    
    return frame, label, textBox, slider, fill, valueLabel, sliderBackground
end

-- –°–æ–∑–¥–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
local SpeedFrame, SpeedLabel, SpeedBox, SpeedSlider, SpeedFill, SpeedValue, SpeedBg = createSetting(SettingsContainer, "–°–∫–æ—Ä–æ—Å—Ç—å", 0, 1, 100, 16, Color3.fromRGB(0, 170, 255))
local JumpFrame, JumpLabel, JumpBox, JumpSlider, JumpFill, JumpValue, JumpBg = createSetting(SettingsContainer, "–ü—Ä—ã–∂–æ–∫", 80, 1, 100, 50, Color3.fromRGB(0, 200, 100))
local FOVFrame, FOVLabel, FOVBox, FOVSlider, FOVFill, FOVValue, FOVBg = createSetting(SettingsContainer, "FOV", 160, 70, 150, 70, Color3.fromRGB(200, 100, 255))

-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
local ButtonsFrame = Instance.new("Frame")
ButtonsFrame.Name = "ButtonsFrame"
ButtonsFrame.Size = UDim2.new(1, -20, 0, 50)
ButtonsFrame.Position = UDim2.new(0, 10, 0, 290)
ButtonsFrame.BackgroundTransparency = 1

local SaveButton = Instance.new("TextButton")
SaveButton.Name = "SaveButton"
SaveButton.Size = UDim2.new(0.48, 0, 1, 0)
SaveButton.Position = UDim2.new(0, 0, 0, 0)
SaveButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
SaveButton.Text = "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
SaveButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SaveButton.TextSize = 16
SaveButton.Font = Enum.Font.GothamBold

local SaveCorner = Instance.new("UICorner")
SaveCorner.CornerRadius = UDim.new(0, 8)
SaveCorner.Parent = SaveButton

local LoadButton = Instance.new("TextButton")
LoadButton.Name = "LoadButton"
LoadButton.Size = UDim2.new(0.48, 0, 1, 0)
LoadButton.Position = UDim2.new(0.52, 0, 0, 0)
LoadButton.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
LoadButton.Text = "üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å"
LoadButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadButton.TextSize = 16
LoadButton.Font = Enum.Font.GothamBold

local LoadCorner = Instance.new("UICorner")
LoadCorner.CornerRadius = UDim.new(0, 8)
LoadCorner.Parent = LoadButton

-- –°—Ç–∞—Ç—É—Å –±–∞—Ä
local StatusBar = Instance.new("Frame")
StatusBar.Name = "StatusBar"
StatusBar.Size = UDim2.new(1, -20, 0, 30)
StatusBar.Position = UDim2.new(0, 10, 0, 350)
StatusBar.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
StatusBar.BorderSizePixel = 0

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 6)
StatusCorner.Parent = StatusBar

local StatusText = Instance.new("TextLabel")
StatusText.Name = "StatusText"
StatusText.Size = UDim2.new(1, -10, 1, 0)
StatusText.Position = UDim2.new(0, 5, 0, 0)
StatusText.BackgroundTransparency = 1
StatusText.Text = "–ì–æ—Ç–æ–≤–æ. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∑–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫"
StatusText.TextColor3 = Color3.fromRGB(200, 200, 200)
StatusText.TextSize = 14
StatusText.Font = Enum.Font.Gotham
StatusText.TextXAlignment = Enum.TextXAlignment.Left
StatusText.Parent = StatusBar

-- –°–æ–±–∏—Ä–∞–µ–º GUI
StatusBar.Parent = MainFrame
LoadButton.Parent = ButtonsFrame
SaveButton.Parent = ButtonsFrame
ButtonsFrame.Parent = MainFrame
SettingsContainer.Parent = MainFrame
CloseButton.Parent = Title
Title.Parent = MainFrame
MainFrame.Parent = ScreenGui

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è GUI
Title.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        StatusText.Text = "–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ..."
    end
end)

Title.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
        StatusText.Text = "–ì–æ—Ç–æ–≤–æ"
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        -- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ GUI
        if dragging and dragStart and startPos then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
        
        -- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–∞–π–¥–µ—Ä–æ–≤
        if sliding and activeSlider then
            local mousePos = input.Position.X
            local sliderAbsPos = activeSlider.bg.AbsolutePosition.X
            local sliderWidth = activeSlider.bg.AbsoluteSize.X
            
            -- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –º—ã—à–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–ª–∞–π–¥–µ—Ä–∞
            local relativeX = math.clamp(mousePos - sliderAbsPos, 0, sliderWidth)
            local percent = relativeX / sliderWidth
            local value = math.floor(activeSlider.min + (activeSlider.max - activeSlider.min) * percent + 0.5)
            value = math.clamp(value, activeSlider.min, activeSlider.max)
            
            activeSlider.callback(value)
        end
    end
end)

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
local function updateUI()
    SpeedBox.Text = tostring(settings.Speed)
    JumpBox.Text = tostring(settings.JumpHeight)
    FOVBox.Text = tostring(settings.FOV)
    
    SpeedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å: " .. settings.Speed
    JumpLabel.Text = "–ü—Ä—ã–∂–æ–∫: " .. settings.JumpHeight
    FOVLabel.Text = "FOV: " .. settings.FOV
    
    SpeedValue.Text = tostring(settings.Speed)
    JumpValue.Text = tostring(settings.JumpHeight)
    FOVValue.Text = tostring(settings.FOV)
    
    SpeedFill.Size = UDim2.new(settings.Speed / 100, 0, 1, 0)
    JumpFill.Size = UDim2.new(settings.JumpHeight / 100, 0, 1, 0)
    FOVFill.Size = UDim2.new((settings.FOV - 70) / 80, 0, 1, 0)
end

-- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫ –∏–≥—Ä–æ–∫—É
local function applySettings()
    if not enabled then return end
    
    -- –ü—Ä–∏–º–µ–Ω—è–µ–º FOV –∫ –∫–∞–º–µ—Ä–µ
    if camera then
        camera.FieldOfView = settings.FOV
    end
    
    -- –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø—Ä—ã–∂–æ–∫ –∫ –ø–µ—Ä—Å–æ–Ω–∞–∂—É
    if player.Character then
        local charHumanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if charHumanoid then
            humanoid = charHumanoid
            
            -- –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
            humanoid.WalkSpeed = settings.Speed
            
            -- –ü–†–ê–í–ò–õ–¨–ù–û–ï –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –í–´–°–û–¢–´ –ü–†–´–ñ–ö–ê
            -- –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Roblox –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JumpHeight
            -- JumpHeight —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –≤—ã—Å–æ—Ç—ã –ø—Ä—ã–∂–∫–∞
            -- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ JumpHeight = 50 (—ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 7.2 —Å–∏–ª—ã –ø—Ä—ã–∂–∫–∞)
            -- –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –ø—Ä—ã–∂–∫–∞, –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å
            humanoid.JumpHeight = settings.JumpHeight
            
            -- –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º JumpPower (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
            if humanoid:GetPropertyChangedSignal("JumpPower") then
                -- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º JumpHeight –≤ JumpPower
                -- –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: JumpPower = JumpHeight * 0.144
                humanoid.JumpPower = settings.JumpHeight * 0.144
            end
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–∞–π–¥–µ—Ä–∞ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –º—ã—à–∏
local function setupSlider(slider, fill, valueLabel, bg, minVal, maxVal, callback)
    local sliderData = {
        bg = bg,
        min = minVal,
        max = maxVal,
        callback = callback,
        fill = fill,
        valueLabel = valueLabel
    }
    
    local function startSliding()
        sliding = true
        activeSlider = sliderData
        StatusText.Text = "–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è..."
    end
    
    local function stopSliding()
        sliding = false
        activeSlider = nil
        StatusText.Text = "–ì–æ—Ç–æ–≤–æ"
    end
    
    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –Ω–∞ —Å–ª–∞–π–¥–µ—Ä–µ
    slider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            startSliding()
        end
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –Ω–∞ —Ñ–æ–Ω–µ —Å–ª–∞–π–¥–µ—Ä–∞
    bg.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            startSliding()
        end
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏ –Ω–∞ —Å–ª–∞–π–¥–µ—Ä–µ
    slider.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            stopSliding()
        end
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏ –Ω–∞ —Ñ–æ–Ω–µ —Å–ª–∞–π–¥–µ—Ä–∞
    bg.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            stopSliding()
        end
    end)
    
    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è
    local function updateSlider(value)
        local percent = (value - minVal) / (maxVal - minVal)
        percent = math.clamp(percent, 0, 1)
        fill.Size = UDim2.new(percent, 0, 1, 0)
        if valueLabel then
            valueLabel.Text = tostring(value)
        end
    end
    
    -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞
    return updateSlider
end

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–∞–π–¥–µ—Ä–æ–≤
local updateSpeedSlider = setupSlider(SpeedSlider, SpeedFill, SpeedValue, SpeedBg, 1, 100, function(value)
    settings.Speed = value
    updateUI()
    applySettings()
end)

local updateJumpSlider = setupSlider(JumpSlider, JumpFill, JumpValue, JumpBg, 1, 100, function(value)
    settings.JumpHeight = value
    updateUI()
    applySettings()
end)

local updateFOVSlider = setupSlider(FOVSlider, FOVFill, FOVValue, FOVBg, 70, 150, function(value)
    settings.FOV = value
    updateUI()
    applySettings()
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
SpeedBox.FocusLost:Connect(function()
    local value = tonumber(SpeedBox.Text)
    if value then
        settings.Speed = math.clamp(value, 1, 100)
        updateSpeedSlider(settings.Speed)
        updateUI()
        applySettings()
    else
        SpeedBox.Text = tostring(settings.Speed)
    end
end)

JumpBox.FocusLost:Connect(function()
    local value = tonumber(JumpBox.Text)
    if value then
        settings.JumpHeight = math.clamp(value, 1, 100)
        updateJumpSlider(settings.JumpHeight)
        updateUI()
        applySettings()
    else
        JumpBox.Text = tostring(settings.JumpHeight)
    end
end)

FOVBox.FocusLost:Connect(function()
    local value = tonumber(FOVBox.Text)
    if value then
        settings.FOV = math.clamp(value, 70, 150)
        updateFOVSlider(settings.FOV)
        updateUI()
        applySettings()
    else
        FOVBox.Text = tostring(settings.FOV)
    end
end)

-- –ö–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏
SaveButton.MouseButton1Click:Connect(function()
    if saveSettings() then
        StatusText.Text = "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ JSON"
    else
        StatusText.Text = "–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"
    end
end)

LoadButton.MouseButton1Click:Connect(function()
    if loadSettings() then
        updateSpeedSlider(settings.Speed)
        updateJumpSlider(settings.JumpHeight)
        updateFOVSlider(settings.FOV)
        updateUI()
        applySettings()
        StatusText.Text = "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ JSON"
    else
        StatusText.Text = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
    end
end)

-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
CloseButton.MouseButton1Click:Connect(function()
    enabled = false
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    if humanoid then
        humanoid.WalkSpeed = 16
        humanoid.JumpHeight = 50
        if humanoid:GetPropertyChangedSignal("JumpPower") then
            humanoid.JumpPower = 50 * 0.144
        end
    end
    if camera then
        camera.FieldOfView = 70
    end
    
    -- –£–¥–∞–ª—è–µ–º GUI
    ScreenGui:Destroy()
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    for _, connection in pairs(connections) do
        if connection then
            pcall(function() connection:Disconnect() end)
        end
    end
end)

-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –º—ã—à–∏
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
        sliding = false
        activeSlider = nil
        StatusText.Text = "–ì–æ—Ç–æ–≤–æ"
    end
end)

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
connections.heartbeat = RunService.Heartbeat:Connect(function()
    if enabled then
        applySettings()
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
connections.character = player.CharacterAdded:Connect(function()
    task.wait(1) -- –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    if enabled then
        applySettings()
    end
end)

-- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
task.spawn(function()
    task.wait(1)
    if loadSettings() then
        updateSpeedSlider(settings.Speed)
        updateJumpSlider(settings.JumpHeight)
        updateFOVSlider(settings.FOV)
        updateUI()
        StatusText.Text = "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã"
    end
    applySettings()
end)

-- –î–æ–±–∞–≤–ª—è–µ–º GUI –≤ CoreGui
if CoreGui:FindFirstChild("LooPMenuSP") then
    CoreGui:FindFirstChild("LooPMenuSP"):Destroy()
end
ScreenGui.Parent = CoreGui

-- –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
connections.inputBegan = UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightControl then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

print("====================================")
print("LooP Menu SP v1.3 —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!")
print("–ü–∞–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫: 1qluaseting")
print("–§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫: LooPMenuSP.json")
print("RightCtrl - —Å–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å GUI")
print("====================================")
