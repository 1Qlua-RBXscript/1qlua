-- WindUI Rewrite - Part 1/?
-- Переписанный скрипт из Compkiller в WindUI

-- ======== ИНИЦИАЛИЗАЦИЯ WINDUI ======== --
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- ======== СОЗДАНИЕ ТЕМЫ ======== --
WindUI:AddTheme({
    Name = "1Qlua Theme",
    
    Accent = Color3.fromHex("#18181b"),
    Background = Color3.fromHex("#101010"),
    BackgroundTransparency = 0,
    Outline = Color3.fromHex("#FFFFFF"),
    Text = Color3.fromHex("#FFFFFF"),
    Placeholder = Color3.fromHex("#7a7a7a"),
    Button = Color3.fromHex("#52525b"),
    Icon = Color3.fromHex("#a1a1aa"),
    
    Hover = Color3.fromHex("#FFFFFF"),
    
    WindowBackground = Color3.fromHex("101010"),
    WindowShadow = Color3.fromHex("000000"),
    
    DialogBackground = Color3.fromHex("#101010"),
    DialogBackgroundTransparency = 0,
    DialogTitle = Color3.fromHex("#FFFFFF"),
    DialogContent = Color3.fromHex("#FFFFFF"),
    DialogIcon = Color3.fromHex("#a1a1aa"),
    
    WindowTopbarButtonIcon = Color3.fromHex("a1a1aa"),
    WindowTopbarTitle = Color3.fromHex("FFFFFF"),
    WindowTopbarAuthor = Color3.fromHex("FFFFFF"),
    WindowTopbarIcon = Color3.fromHex("FFFFFF"),
    
    TabBackground = Color3.fromHex("#FFFFFF"),
    TabTitle = Color3.fromHex("#FFFFFF"),
    TabIcon = Color3.fromHex("a1a1aa"),
    
    ElementBackground = Color3.fromHex("#FFFFFF"),
    ElementTitle = Color3.fromHex("#FFFFFF"),
    ElementDesc = Color3.fromHex("#FFFFFF"),
    ElementIcon = Color3.fromHex("#a1a1aa"),
    
    PopupBackground = Color3.fromHex("#101010"),
    PopupBackgroundTransparency = 0,
    PopupTitle = Color3.fromHex("#FFFFFF"),
    PopupContent = Color3.fromHex("#FFFFFF"),
    PopupIcon = Color3.fromHex("#a1a1aa"),
})

-- Установка градиента (если поддерживается)
WindUI:Gradient({                                                      
    ["0"] = { Color = Color3.fromHex("#1f1f23"), Transparency = 0 },            
    ["100"] = { Color = Color3.fromHex("#18181b"), Transparency = 0 },        
}, {                                                                            
    Rotation = 0,                                                               
})

-- Установка темы
WindUI:SetTheme("1Qlua Theme")

-- ======== НАСТРОЙКИ ======== --
local SETTINGS = {
    WALK_SPEED = {
        DEFAULT = 16,
        MIN = 0,
        MAX = 150
    },
    JUMP_POWER = {
        DEFAULT = 50,
        MIN = 0,
        MAX = 500
    },
    FOV = {
        DEFAULT = 70,
        MIN = 0,
        MAX = 120
    },
    TIME = {
        DEFAULT = 12,
        MIN = 0,
        MAX = 24
    }
}

-- ======== СИСТЕМА ОПТИМИЗАЦИИ ======== --
local PerformanceManager = {
    maxESPPlayers = 10,
    espUpdateRate = 0.3,
    activeLoops = {},
    debugMode = false
}

function PerformanceManager:throttle(name, interval)
    if not self.lastCall then self.lastCall = {} end
    if not self.lastCall[name] then self.lastCall[name] = 0 end
    
    local now = tick()
    if now - self.lastCall[name] < interval then
        return true
    end
    self.lastCall[name] = now
    return false
end

function PerformanceManager:getMemoryUsage()
    local stats = game:GetService("Stats")
    return stats:GetMemoryUsageMbForTag(Enum.DeveloperMemoryType.Gui)
end

function PerformanceManager:autoCleanup()
    if self:getMemoryUsage() > 50 then
        warn("⚠️ ВНИМАНИЕ: Высокое использование памяти, очистка...")
        for _, child in pairs(game:GetService("CoreGui"):GetChildren()) do
            if string.find(child.Name, "_ESP") then
                child:Destroy()
            end
        end
    end
end

-- Запускаем мониторинг
game:GetService("RunService").Heartbeat:Connect(function()
    PerformanceManager:autoCleanup()
end)

-- ======== СОЗДАНИЕ ОКНА ======== --
local Window = WindUI:CreateWindow({
    Title = "1Qlua - Универсальный хаб",
    Icon = "door-open",
    Author = "by 1Qlua",
    Folder = "1QluaHub",
    
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "1Qlua Theme",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    
    User = {
        Enabled = true,
        Anonymous = true,
        Callback = function()
            print("User clicked")
        end,
    },
})

-- Установка клавиши переключения
Window:SetToggleKey(Enum.KeyCode.LeftAlt)

-- Уведомление при запуске
WindUI:Notify({
    Title = "1Qlua",
    Content = "Универсальный хаб скриптов загружен!",
    Duration = 8,
    Icon = "check-circle"
})

-- ======== ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ И ФУНКЦИИ ======== --
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Глобальные настройки
_G.Walk = SETTINGS.WALK_SPEED.DEFAULT
_G.WalkSpeedEnabled = true

-- Переменные для функций
local xrayEnabled = false
local xrayLoop = nil
local brightLoop = nil
local viewing = nil
local viewDied = nil
local viewChanged = nil

-- ======== ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ ======== --
local function StopFreecam()
    -- Логика остановки фрикама (добавить при необходимости)
end

local function getPlayer(name, speaker)
    local found = {}
    local nameLower = name:lower()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= speaker then
            if player.Name:lower():find(nameLower) or player.DisplayName:lower():find(nameLower) then
                table.insert(found, player)
            end
        end
    end
    return found
end

local function getRoot(character)
    return character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
end

-- Функция XRay
local function xray()
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and not v.Parent:FindFirstChildOfClass("Humanoid") and not v.Parent.Parent:FindFirstChildOfClass("Humanoid") then
            v.LocalTransparencyModifier = xrayEnabled and 0.7 or 0
        end
    end
end

-- Функция для создания папки без ключа
local function createNoKeyFolder()
    local canWrite = false
    local writeMethods = {writefile, makefolder, saveinstance}
    
    for _, method in pairs(writeMethods) do
        if type(method) == "function" then
            canWrite = true
            break
        end
    end
    
    if not canWrite then
        WindUI:Popup({
            Title = "Ошибка",
            Icon = "alert-circle",
            Content = "Ваш эксплойт не поддерживает запись файлов",
            Buttons = {
                {
                    Title = "OK",
                    Callback = function() end,
                    Variant = "Primary",
                }
            }
        })
        return
    end
    
    local success, err = pcall(function()
        local paths = {
            "1qluaNoRuKey",
            "workspace/1qluaNoRuKey", 
            "exploit/1qluaNoRuKey",
            "bin/1qluaNoRuKey"
        }
        
        local created = false
        for _, path in ipairs(paths) do
            if not created then
                pcall(function()
                    makefolder(path)
                    created = true
                    writefile(path.."/README.txt", "Эта папка создана для входа без ключа")
                end)
            end
        end
        
        if not created then
            error("Не удалось создать папку ни в одной из возможных директорий")
        end
    end)
    
    if success then
        WindUI:Notify({
            Title = "Успех",
            Content = "Папка для входа без ключа создана!",
            Duration = 5,
            Icon = "check-circle"
        })
    else
        WindUI:Popup({
            Title = "Ошибка",
            Icon = "alert-circle",
            Content = "Не удалось создать папку: "..tostring(err),
            Buttons = {
                {
                    Title = "OK", 
                    Callback = function() end,
                    Variant = "Primary",
                }
            }
        })
    end
end

-- ======== ОБРАБОТЧИК СКОРОСТИ ======== --
local Heartbeat = RunService.Heartbeat

local function UpdateSpeed()
    if not _G.WalkSpeedEnabled then return end
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = _G.Walk
        end
    end
end

Heartbeat:Connect(UpdateSpeed)
player.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid")
    UpdateSpeed()
end)

-- ======== ОСНОВНЫЕ ФУНКЦИИ ======== --
local Functions = {}

Functions.JumpPower = function(value)
    local humanoid = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = value
    end
    player.CharacterAdded:Connect(function(character)
        character:WaitForChild("Humanoid").JumpPower = value
    end)
end

Functions.FOV = function(value)
    workspace.CurrentCamera.FieldOfView = value
    workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
        if workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = value
        end
    end)
end

Functions.TimeOfDay = function(hours)
    Lighting.ClockTime = hours % 12 == 0 and 12 or hours % 12
end

Functions.LoadScript = function(url)
    local success, err = pcall(loadstring(game:HttpGet(url)))
    if not success then
        WindUI:Notify({
            Title = "Ошибка",
            Content = "Ошибка загрузки: "..err,
            Duration = 5,
            Icon = "alert-circle"
        })
    end
end

-- WindUI Rewrite - Part 2/?
-- Продолжение переписывания скрипта из Compkiller в WindUI

-- ======== СОЗДАНИЕ ВКЛАДКИ ИГРОКА ======== --
local PlayerTab = Window:Tab({
    Title = "Игрок",
    Icon = "user",
    Locked = false
})

-- ======== СЕРВИСЫ И ПЕРЕМЕННЫЕ ======== --
local Players = game:GetService("Players")
local GuiService = game:GetService("GuiService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")
local speaker = Players.LocalPlayer

-- Переменные для функций
local partHighlights = {}
local espTransparency = 0.5
local autoRejoinConnection
local antiAfkEnabled = false
local antiLagEnabled = false

-- ======== ФУНКЦИИ ДЛЯ PART ESP ======== --
local function createHighlight(part)
    local highlight = Instance.new("BoxHandleAdornment")
    highlight.Name = "PART_HIGHLIGHT_"..part.Name
    highlight.Parent = part
    highlight.Adornee = part
    highlight.AlwaysOnTop = true
    highlight.ZIndex = 0
    highlight.Size = part.Size
    highlight.Transparency = espTransparency
    highlight.Color = BrickColor.new("Lime green")
    return highlight
end

local function highlightPart(partName)
    partName = partName:lower()
    local found = false
    
    -- Удаляем старую подсветку если есть
    if partHighlights[partName] then
        for _, part in pairs(partHighlights[partName].parts) do
            if part and part.Parent then
                local highlight = part:FindFirstChild("PART_HIGHLIGHT_"..part.Name)
                if highlight then
                    highlight:Destroy()
                end
            end
        end
        if partHighlights[partName].connection then
            partHighlights[partName].connection:Disconnect()
        end
        partHighlights[partName] = nil
        WindUI:Notify({
            Title = "Part ESP",
            Content = "Removed from "..partName,
            Duration = 3,
            Icon = "x-circle"
        })
        return
    end
    
    -- Добавляем новую подсветку
    partHighlights[partName] = {parts = {}, connection = nil}
    
    -- Подсвечиваем существующие части
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and part.Name:lower() == partName then
            table.insert(partHighlights[partName].parts, part)
            createHighlight(part)
            found = true
        end
    end
    
    -- Подписываемся на новые части
    partHighlights[partName].connection = workspace.DescendantAdded:Connect(function(child)
        if child:IsA("BasePart") and child.Name:lower() == partName then
            table.insert(partHighlights[partName].parts, child)
            createHighlight(child)
        end
    end)
    
    if found then
        WindUI:Notify({
            Title = "Part ESP",
            Content = "Highlighted "..partName,
            Duration = 3,
            Icon = "check-circle"
        })
    else
        WindUI:Notify({
            Title = "Part ESP",
            Content = "No parts found",
            Duration = 3,
            Icon = "alert-circle"
        })
    end
end

local function clearAllHighlights()
    for partName, data in pairs(partHighlights) do
        for _, part in pairs(data.parts) do
            if part and part.Parent then
                local highlight = part:FindFirstChild("PART_HIGHLIGHT_"..part.Name)
                if highlight then
                    highlight:Destroy()
                end
            end
        end
        if data.connection then
            data.connection:Disconnect()
        end
    end
    partHighlights = {}
    WindUI:Notify({
        Title = "Part ESP",
        Content = "All highlights cleared",
        Duration = 3,
        Icon = "check-circle"
    })
end

-- ======== СЕКЦИЯ ОСНОВНЫХ НАСТРОЕК ======== --
local PlayerMainSection = PlayerTab:Section({
    Title = "Основные настройки",
    Opened = true
})

PlayerMainSection:Button({
    Title = "Нажми чтобы заходить без ключа",
    Desc = "Создает папку для входа без ключа",
    Callback = createNoKeyFolder
})

-- 1. Слайдер скорости передвижения
local WalkSpeedSlider = PlayerMainSection:Slider({
    Title = "Скорость передвижения",
    Desc = "Изменяет скорость вашего персонажа",
    Step = 1,
    Value = {
        Min = 0,
        Max = 150,
        Default = 16,
    },
    Callback = function(value)
        _G.Walk = value
        _G.WalkSpeedEnabled = true
        
        -- Немедленное применение
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
        
        print("✅ Скорость установлена: " .. value)
    end
})

-- 2. Слайдер высоты прыжка
local JumpPowerSlider = PlayerMainSection:Slider({
    Title = "Высота прыжка",
    Desc = "Изменяет высоту прыжка персонажа",
    Step = 1,
    Value = {
        Min = 0,
        Max = 500,
        Default = 50,
    },
    Callback = function(value)
        -- Немедленное применение
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.JumpPower = value
            end
        end
        
        -- Для будущих персонажей
        player.CharacterAdded:Connect(function(newChar)
            newChar:WaitForChild("Humanoid").JumpPower = value
        end)
        
        print("✅ Высота прыжка установлена: " .. value)
    end
})

-- 3. Слайдер FOV
local FOVSlider = PlayerMainSection:Slider({
    Title = "Поле зрения (FOV)",
    Desc = "Изменяет угол обзора камеры",
    Step = 1,
    Value = {
        Min = 0,
        Max = 120,
        Default = 70,
    },
    Callback = function(value)
        if workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = value
        end
        
        -- Авто-применение при смене камеры
        workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
            if workspace.CurrentCamera then
                workspace.CurrentCamera.FieldOfView = value
            end
        end)
        
        print("✅ FOV установлен: " .. value)
    end
})

-- 4. Слайдер времени суток
local TimeSlider = PlayerMainSection:Slider({
    Title = "Время суток",
    Desc = "Изменяет текущее время в игре",
    Step = 1,
    Value = {
        Min = 0,
        Max = 24,
        Default = 12,
    },
    Callback = function(value)
        Lighting.ClockTime = value
        print("✅ Время установлено: " .. value)
    end
})

-- ======== СЕКЦИЯ HITBOX ======== --
local HitboxSection = PlayerTab:Section({
    Title = "Hitbox Settings",
    Opened = true
})

-- Переменные для хитбоксов
local hitboxEnabled = false
local hitboxSize = 2
local hitboxTransparency = 0.4
local selectedPlayerOptions = {"All"}

-- Функция для получения списка игроков
local function getPlayerList()
    local players = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Players.LocalPlayer then
            table.insert(players, player.Name)
        end
    end
    return players
end

-- Функция для обновления хитбоксов
local function updateHitboxes()
    for _, player in pairs(Players:GetPlayers()) do
        if player.Character and player.Character:FindFirstChild('HumanoidRootPart') then
            local root = player.Character.HumanoidRootPart
            
            -- Проверяем, должен ли этот игрок иметь хитбокс
            local shouldHaveHitbox = false
            if hitboxEnabled then
                if table.find(selectedPlayerOptions, "All") then
                    shouldHaveHitbox = (player ~= Players.LocalPlayer)
                else
                    local isEnemy = not player.Team or player.Team ~= Players.LocalPlayer.Team
                    if table.find(selectedPlayerOptions, "Enemies") and isEnemy then
                        shouldHaveHitbox = true
                    elseif table.find(selectedPlayerOptions, "Team") and not isEnemy then
                        shouldHaveHitbox = true
                    elseif table.find(selectedPlayerOptions, player.Name) then
                        shouldHaveHitbox = true
                    end
                end
            end
            
            if shouldHaveHitbox then
                root.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)
                root.Transparency = hitboxTransparency
            else
                root.Size = Vector3.new(2, 1, 1)
                root.Transparency = 1
            end
        end
    end
end

-- Тоггл для включения/выключения хитбоксов
HitboxSection:Toggle({
    Title = "Enable Hitboxes",
    Desc = "Включить систему хитбоксов",
    Value = false,
    Callback = function(value)
        hitboxEnabled = value
        updateHitboxes()
    end
})

local HitboxSizeSlider = HitboxSection:Slider({
    Title = "Hitbox Size",
    Desc = "Размер хитбокса игроков",
    Step = 1,
    Value = {
        Min = 1,
        Max = 10,
        Default = 2,
    },
    Callback = function(value)
        hitboxSize = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

local HitboxTransparencySlider = HitboxSection:Slider({
    Title = "Transparency",
    Desc = "Прозрачность хитбокса",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0.4,
    },
    Callback = function(value)
        hitboxTransparency = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

-- Выбор игроков
local playerOptions = {"All", "Enemies", "Team"}
local playerNames = getPlayerList()
for _, name in pairs(playerNames) do
    table.insert(playerOptions, name)
end

HitboxSection:Dropdown({
    Title = "Select Players",
    Desc = "Выберите игроков для хитбоксов",
    Values = playerOptions,
    Value = {"All"},
    Multi = true,
    Callback = function(selected)
        selectedPlayerOptions = selected
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

-- Кнопка для обновления списка игроков
HitboxSection:Button({
    Title = "Refresh Players",
    Desc = "Обновить список игроков",
    Callback = function()
        playerOptions = {"All", "Enemies", "Team"}
        playerNames = getPlayerList()
        for _, name in pairs(playerNames) do
            table.insert(playerOptions, name)
        end
        updateHitboxes()
        WindUI:Notify({
            Title = "Hitbox",
            Content = "Player list refreshed",
            Duration = 3,
            Icon = "refresh-cw"
        })
    end
})

-- Автоматическое обновление при появлении новых игроков
Players.PlayerAdded:Connect(function(player)
    playerOptions = {"All", "Enemies", "Team"}
    playerNames = getPlayerList()
    for _, name in pairs(playerNames) do
        table.insert(playerOptions, name)
    end
end)

Players.PlayerRemoving:Connect(function(player)
    playerOptions = {"All", "Enemies", "Team"}
    playerNames = getPlayerList()
    for _, name in pairs(playerNames) do
        table.insert(playerOptions, name)
    end
end)

-- ======== СЕКЦИЯ ВИЗУАЛЬНЫХ ЭФФЕКТОВ ======== --
local VisualSection = PlayerTab:Section({
    Title = "Visual Effects",
    Opened = true
})

-- XRay Toggle
VisualSection:Toggle({
    Title = "X-Ray",
    Desc = "Видеть сквозь стены и объекты",
    Value = false,
    Callback = function(state)
        xrayEnabled = state
        xray()
        WindUI:Notify({
            Title = "X-Ray",
            Content = state and "Enabled" or "Disabled",
            Duration = 3,
            Icon = state and "check-circle" or "x-circle"
        })
    end
})

-- Fullbright Toggle
VisualSection:Toggle({
    Title = "Fullbright",
    Desc = "Максимальная яркость освещения",
    Value = false,
    Callback = function(state)
        if state then
            Lighting.Brightness = 2
            Lighting.ClockTime = 14
            Lighting.FogEnd = 100000
            Lighting.GlobalShadows = false
            Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
        else
            Lighting.Brightness = 1
            Lighting.ClockTime = 14
            Lighting.FogEnd = 1000000
            Lighting.GlobalShadows = true
            Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
        end
        WindUI:Notify({
            Title = "Fullbright",
            Content = state and "Enabled" or "Disabled",
            Duration = 3,
            Icon = state and "check-circle" or "x-circle"
        })
    end
})

-- Auto Fullbright Toggle
VisualSection:Toggle({
    Title = "Авто Fullbright",
    Desc = "Автоматически поддерживать Fullbright",
    Value = false,
    Callback = function(state)
        if state then
            if brightLoop then brightLoop:Disconnect() end
            
            brightLoop = RunService.RenderStepped:Connect(function()
                Lighting.Brightness = 2
                Lighting.ClockTime = 14
                Lighting.FogEnd = 100000
                Lighting.GlobalShadows = false
                Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
            end)
        else
            if brightLoop then
                brightLoop:Disconnect()
                brightLoop = nil
            end
        end
        WindUI:Notify({
            Title = "Auto Fullbright",
            Content = state and "Enabled" or "Disabled",
            Duration = 3,
            Icon = state and "check-circle" or "x-circle"
        })
    end
})

-- ======== СЕКЦИЯ PART ESP ======== --
local PartESPSection = PlayerTab:Section({
    Title = "Part ESP",
    Opened = true
})

PartESPSection:Input({
    Title = "Highlight Part",
    Desc = "Введите название части для подсветки",
    Placeholder = "Enter part name",
    Callback = highlightPart
})

PartESPSection:Button({
    Title = "Clear All Highlights",
    Desc = "Очистить все подсветки",
    Callback = clearAllHighlights
})

-- Слайдер прозрачности (исправленный синтаксис)
PartESPSection:Slider({
    Title = "Highlight Transparency",
    Desc = "Прозрачность подсветки частей",
    Step = 0.1,
    Value = {
        Min = 0,
        Max = 1,
        Default = 0.5,
    },
    Callback = function(value)
        espTransparency = value
        -- Обновляем прозрачность всех существующих подсветок
        for _, data in pairs(partHighlights) do
            for _, part in pairs(data.parts) do
                if part and part.Parent then
                    local highlight = part:FindFirstChild("PART_HIGHLIGHT_"..part.Name)
                    if highlight then
                        highlight.Transparency = value
                    end
                end
            end
        end
        WindUI:Notify({
            Title = "Part ESP",
            Content = "Прозрачность установлена: " .. value,
            Duration = 2,
            Icon = "eye"
        })
    end
})

-- ======== СЕКЦИЯ УТИЛИТ ======== --
local UtilitySection = PlayerTab:Section({
    Title = "Utility",
    Opened = true
})

UtilitySection:Button({
    Title = "Copy Server Link",
    Desc = "Скопировать ссылку на сервер",
    Callback = function()
        setclipboard("roblox://placeId="..game.PlaceId.."&gameInstanceId="..game.JobId)
        WindUI:Notify({
            Title = "Server Link",
            Content = "Copied to clipboard!",
            Duration = 3,
            Icon = "copy"
        })
    end
})

UtilitySection:Toggle({
    Title = "Auto Rejoin",
    Desc = "Автоматически переподключаться при ошибке",
    Value = false,
    Callback = function(state)
        if state then
            if autoRejoinConnection then
                autoRejoinConnection:Disconnect()
            end
            autoRejoinConnection = GuiService.ErrorMessageChanged:Connect(function()
                TeleportService:Teleport(game.PlaceId)
            end)
            WindUI:Notify({
                Title = "Auto Rejoin",
                Content = "Enabled",
                Duration = 3,
                Icon = "check-circle"
            })
        else
            if autoRejoinConnection then
                autoRejoinConnection:Disconnect()
                autoRejoinConnection = nil
            end
            WindUI:Notify({
                Title = "Auto Rejoin",
                Content = "Disabled", 
                Duration = 3,
                Icon = "x-circle"
            })
        end
    end
})

UtilitySection:Toggle({
    Title = "Anti-AFK",
    Desc = "Предотвращает отключение за бездействие",
    Value = false,
    Callback = function(state)
        antiAfkEnabled = state
        if state then
            local GC = getconnections or get_signal_cons
            if GC then
                for i,v in pairs(GC(Players.LocalPlayer.Idled)) do
                    if v["Disable"] then
                        v["Disable"](v)
                    elseif v["Disconnect"] then
                        v["Disconnect"](v)
                    end
                end
            else
                local VirtualUser = game:GetService("VirtualUser")
                Players.LocalPlayer.Idled:Connect(function()
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton2(Vector2.new())
                end)
            end
            WindUI:Notify({
                Title = 'Anti-AFK',
                Content = 'Enabled',
                Duration = 3,
                Icon = 'check-circle'
            })
        else
            WindUI:Notify({
                Title = 'Anti-AFK',
                Content = 'Disabled',
                Duration = 3,
                Icon = 'x-circle'
            })
        end
    end
})

-- WindUI Rewrite - Part 3/?
-- Продолжение переписывания скрипта из Compkiller в WindUI

-- ======== СЕКЦИЯ КОПИРОВАТЕЛЯ ПУТЕЙ ОБЪЕКТОВ ======== --
local PathCopierSection = PlayerTab:Section({
    Title = "Копирователь путей объектов",
    Opened = true
})

-- Переменные для копирователя путей
local pathCopierEnabled = false
local currentPath = ""
local pathCopierConnection = nil

-- Функция получения пути через GetChildren
local function getPathWithGetChildren(object)
    if not object or not object.Parent then
        return "Неверный объект"
    end
    
    local pathParts = {}
    local current = object
    
    while current and current ~= game do
        local parent = current.Parent
        if parent then
            local children = parent:GetChildren()
            for index, child in ipairs(children) do
                if child == current then
                    table.insert(pathParts, 1, {name = current.Name, index = index})
                    break
                end
            end
            current = parent
        else
            break
        end
    end
    
    local result = "game"
    for i, part in ipairs(pathParts) do
        if i == 1 then
            result = result .. ":GetService(\"" .. part.name .. "\")"
        else
            result = result .. ":GetChildren()[" .. part.index .. "]"
        end
    end
    
    return result
end

-- Функция получения полного пути
local function getFullPath(object)
    if not object then 
        return "Неверный объект" 
    end
    local success, result = pcall(function()
        return object:GetFullName()
    end)
    if success then
        return result
    else
        return "Ошибка получения пути"
    end
end

-- Функция получения Debug пути
local function getDebugPath(object)
    if not object then 
        return "Неверный объект" 
    end
    local fullName = getFullPath(object)
    local objectId = tostring(object:GetDebugId())
    local className = object.ClassName
    return fullName .. " -- DebugId: " .. objectId .. " Class: " .. className
end

-- Основная функция получения пути
local function getSmartPath(object)
    local format = getgenv().PathCopierFormat or "GetChildren"
    if format == "GetChildren" then
        return getPathWithGetChildren(object)
    elseif format == "FullPath" then
        return getFullPath(object)
    elseif format == "Debug" then
        return getDebugPath(object)
    else
        return getPathWithGetChildren(object)
    end
end

-- Функция подсветки объекта
local function highlightObject(object)
    if not object then 
        return 
    end
    if not getgenv().PathCopierHighlight then 
        return 
    end
    
    local oldHighlight = object:FindFirstChild("PathCopierHighlight")
    if oldHighlight then
        oldHighlight:Destroy()
    end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "PathCopierHighlight"
    highlight.Adornee = object
    highlight.FillColor = getgenv().PathCopierHighlightColor or Color3.fromRGB(255, 255, 0)
    highlight.FillTransparency = 0.5
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.OutlineTransparency = 0
    highlight.Parent = object
    
    task.delay(3, function()
        if highlight and highlight.Parent then
            highlight:Destroy()
        end
    end)
end

-- Функция обработки клика по объекту
local function onObjectClicked(object)
    if not pathCopierEnabled or not object then 
        return 
    end
    
    local path = getSmartPath(object)
    currentPath = path
    highlightObject(object)
    
    pcall(function()
        setclipboard(path)
    end)
    
    WindUI:Notify({
        Title = "Путь скопирован",
        Content = "Объект: " .. object.Name .. "\nКласс: " .. object.ClassName .. "\nПуть скопирован!",
        Duration = 4,
        Icon = "copy"
    })
    
    print("[Path Copier] Объект: " .. object.Name .. " | Путь: " .. path)
end

-- Функция настройки копирователя
local function setupPathCopier()
    if pathCopierConnection then
        pathCopierConnection:Disconnect()
    end
    
    local player = game:GetService("Players").LocalPlayer
    local mouse = player:GetMouse()
    
    pathCopierConnection = mouse.Button1Down:Connect(function()
        local target = mouse.Target
        if target and pathCopierEnabled then
            task.wait(0.01)
            if target.Parent then
                onObjectClicked(target)
            end
        end
    end)
end

-- Функция отключения копирователя
local function teardownPathCopier()
    if pathCopierConnection then
        pathCopierConnection:Disconnect()
        pathCopierConnection = nil
    end
end

-- Инициализация настроек
if not getgenv().PathCopierFormat then
    getgenv().PathCopierFormat = "GetChildren"
end
if getgenv().PathCopierHighlight == nil then
    getgenv().PathCopierHighlight = true
end
if not getgenv().PathCopierHighlightColor then
    getgenv().PathCopierHighlightColor = Color3.fromRGB(255, 255, 0)
end

-- Toggle для включения/выключения
PathCopierSection:Toggle({
    Title = "Включить копирование",
    Desc = "Включить инструмент копирования путей объектов",
    Value = false,
    Callback = function(enabled)
        pathCopierEnabled = enabled
        if enabled then
            WindUI:Notify({
                Title = "Копирователь путей",
                Content = "Инструмент включен! Нажмите на любой объект чтобы скопировать его путь.",
                Duration = 3,
                Icon = "copy"
            })
            setupPathCopier()
        else
            teardownPathCopier()
            WindUI:Notify({
                Title = "Копирователь путей",
                Content = "Инструмент выключен.",
                Duration = 2,
                Icon = "copy"
            })
        end
    end
})

-- Настройка формата пути
PathCopierSection:Dropdown({
    Title = "Формат пути",
    Desc = "Выберите формат копируемого пути",
    Values = {"GetChildren", "FullPath", "Debug"},
    Value = "GetChildren",
    Callback = function(format)
        getgenv().PathCopierFormat = format
    end
})

-- Настройка подсветки
PathCopierSection:Toggle({
    Title = "Включить подсветку",
    Desc = "Подсвечивать выбранные объекты",
    Value = true,
    Callback = function(enabled)
        getgenv().PathCopierHighlight = enabled
    end
})

-- Цвет подсветки
PathCopierSection:Colorpicker({
    Title = "Цвет подсветки",
    Desc = "Цвет подсветки выбранных объектов",
    Default = Color3.fromRGB(255, 255, 0),
    Callback = function(color)
        getgenv().PathCopierHighlightColor = color
    end
})

-- Кнопка копирования
PathCopierSection:Button({
    Title = "Скопировать последний путь",
    Desc = "Скопировать последний найденный путь",
    Callback = function()
        if currentPath ~= "" then
            pcall(function()
                setclipboard(currentPath)
            end)
            WindUI:Notify({
                Title = "Копирователь путей",
                Content = "Путь скопирован в буфер обмена!",
                Duration = 2,
                Icon = "check-circle"
            })
        else
            WindUI:Notify({
                Title = "Копирователь путей",
                Content = "Нет пути для копирования!",
                Duration = 2,
                Icon = "alert-circle"
            })
        end
    end
})

-- Инструкция
PathCopierSection:Paragraph({
    Title = "Форматы путей",
    Content = "GetChildren - путь через индексы детей\nFullPath - обычный полный путь\nDebug - с ID объекта и классом"
})

-- Автоотключение при выходе
Players.LocalPlayer:GetPropertyChangedSignal("Parent"):Connect(function()
    if not Players.LocalPlayer.Parent then
        teardownPathCopier()
    end
end)

-- ======== СЕКЦИЯ ДОПОЛНИТЕЛЬНЫХ СКРИПТОВ ======== --
local PlayerScriptsSection = PlayerTab:Section({
    Title = "Дополнительные скрипты",
    Opened = true
})

-- Anti-Lag Toggle
PlayerScriptsSection:Toggle({
    Title = "Anti-Lag",
    Desc = "Уменьшает лаги и улучшает производительность",
    Value = false,
    Callback = function(state)
        antiLagEnabled = state
        if state then
            local Terrain = workspace:FindFirstChildOfClass('Terrain')
            Terrain.WaterWaveSize = 0
            Terrain.WaterWaveSpeed = 0
            Terrain.WaterReflectance = 0
            Terrain.WaterTransparency = 1
            
            Lighting.GlobalShadows = false
            Lighting.FogEnd = 9e9
            Lighting.FogStart = 9e9
            settings().Rendering.QualityLevel = 1
            
            for _,v in pairs(game:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.Material = "Plastic"
                    v.Reflectance = 0
                    for _, surface in pairs({"Back", "Bottom", "Front", "Left", "Right", "Top"}) do
                        v[surface.."Surface"] = "SmoothNoOutlines"
                    end
                elseif v:IsA("Decal") then
                    v.Transparency = 1
                elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                    v.Lifetime = NumberRange.new(0)
                end
            end
            
            for _,v in pairs(Lighting:GetDescendants()) do
                if v:IsA("PostEffect") then
                    v.Enabled = false
                end
            end
            
            workspace.DescendantAdded:Connect(function(child)
                if child:IsA('ForceField') or child:IsA('Sparkles') or child:IsA('Smoke') or child:IsA('Fire') or child:IsA('Beam') then
                    task.wait()
                    child:Destroy()
                end
            end)
            
            WindUI:Notify({
                Title = "Anti-Lag",
                Content = "Enabled - перезапустите игру для отключения",
                Duration = 5,
                Icon = "zap"
            })
        else
            WindUI:Notify({
                Title = "Anti-Lag",
                Content = "Restart game to disable completely",
                Duration = 3,
                Icon = "zap"
            })
        end
    end
})

-- Noclip Toggle
PlayerScriptsSection:Toggle({
    Title = "Noclip",
    Desc = "Проходить сквозь стены и объекты",
    Value = false,
    Callback = function(state)
        if state then
            local Clip = false
            local function NoclipLoop()
                if Clip == false and speaker.Character ~= nil then
                    for _, child in pairs(speaker.Character:GetDescendants()) do
                        if child:IsA("BasePart") and child.CanCollide == true then
                            child.CanCollide = false
                        end
                    end
                end
            end
            local Noclipping = RunService.Stepped:Connect(NoclipLoop)
            WindUI:Notify({
                Title = 'Noclip',
                Content = 'Enabled',
                Duration = 3,
                Icon = 'eye-off'
            })
        else
            if Noclipping then
                Noclipping:Disconnect()
            end
            WindUI:Notify({
                Title = 'Noclip',
                Content = 'Disabled',
                Duration = 3,
                Icon = 'eye'
            })
        end
    end
})

-- ======== КНОПКИ ЗАГРУЗКИ СКРИПТОВ ======== --
local ScriptButtons = {
    {
        Title = "Запускает нужные скрипты",
        Desc = "Запускает парочку нужных скриптов для игры",
        Icon = "play",
        Url = "https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/ALLSCRIPTRUN"
    },
    {
        Title = "Infinite Yield",
        Desc = "Мощные админ-команды для управления игрой",
        Icon = "command",
        Url = "https://raw.githubusercontent.com/Infinite-Store/Infinite-Store/main/main.lua"
    },
    {
        Title = "f3x",
        Desc = "Инструмент для строительства",
        Icon = "box",
        Url = "https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/f3x.lua"
    },
    {
        Title = "DEX Explorer",
        Desc = "Инструмент для исследования игровых объектов",
        Icon = "search",
        Url = "https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"
    },
    {
        Title = "DEX++",
        Desc = "Улучшенная версия DEX Explorer",
        Icon = "search",
        Url = "https://raw.githubusercontent.com/ltseverydayyou/uuuuuuu/refs/heads/main/DexPlusBackup.luau"
    },
    {
        Title = "Полёт (F)",
        Desc = "Включение режима полёта по нажатию F",
        Icon = "wind",
        Script = [[loadstring("\108\111\97\100\115\116\114\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\40\39\104\116\116\112\115\58\47\47\103\105\115\116\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\109\101\111\122\111\110\101\89\84\47\98\102\48\51\55\100\102\102\57\102\48\97\55\48\48\49\55\51\48\52\100\100\100\54\55\102\100\99\100\51\55\48\47\114\97\119\47\101\49\52\101\55\52\102\52\50\53\98\48\54\48\100\102\53\50\51\51\52\51\99\102\51\48\98\55\56\55\48\55\52\101\98\51\99\53\100\50\47\97\114\99\101\117\115\37\50\53\50\48\120\37\50\53\50\48\102\108\121\37\50\53\50\48\50\37\50\53\50\48\111\98\102\108\117\99\97\116\111\114\39\41\44\116\114\117\101\41\41\40\41\10\10")()]]
    },
    {
        Title = "Невидимость (E)",
        Desc = "Делает вашего персонажа невидимым",
        Icon = "eye-off",
        Url = "https://pastebin.com/raw/VtWhnEnm"
    },
    {
        Title = "ТП к игрокам",
        Desc = "Телепортироваться к другим игрокам",
        Icon = "users",
        Url = "https://pastebin.com/raw/z4HARAHs"
    },
    {
        Title = "Удалить стены",
        Desc = "Удаляет препятствия в игре",
        Icon = "trash-2",
        Url = "https://pastebin.com/raw/FBKJTUyw"
    },
    {
        Title = "Падение на месте (R)",
        Desc = "Персонаж падает на месте без движения",
        Icon = "arrow-down",
        Url = "https://pastebin.com/raw/CTUaCKN1"
    },
    {
        Title = "Свободная камера (Shift+P)",
        Desc = "Отключает привязку камеры к персонажу",
        Icon = "camera",
        Url = "https://pastebin.com/raw/ct8Kq5F0"
    },
    {
        Title = "Полет на машине (V)",
        Desc = "Позволяет транспорту летать",
        Icon = "car",
        Url = "https://pastebin.com/raw/9bNj1EcR"
    },
    {
        Title = "Чекпойнты",
        Desc = "Создает точки для быстрой телепортации",
        Icon = "flag",
        Url = "https://pastebin.com/raw/rz7uUmED"
    },
    {
        Title = "Обход голосового чата",
        Desc = "Позволяет обойти ограничения голосового чата",
        Icon = "mic",
        Url = "https://raw.githubusercontent.com/CorpseCMD/MyScripts/main/VoicechatBypass.lua"
    },
    {
        Title = "Шейдеры",
        Desc = "Улучшает визуальные эффекты игры",
        Icon = "palette",
        Url = "https://pastebin.com/raw/1XA5qM3D"
    },
    {
        Title = "Sigma Spy",
        Desc = "Мониторинг игровых событий",
        Icon = "eye",
        Url = "https://raw.githubusercontent.com/depthso/Sigma-Spy/main/Main.lua"
    },
    {
        Title = "English version",
        Desc = "Переключиться на английскую версию",
        Icon = "globe",
        Url = "https://pastebin.com/raw/32k6f2Ns"
    },
    {
        Title = "Админ Команды от 1qlua",
        Desc = "Набор административных команд",
        Icon = "shield",
        Url = "https://pastebin.com/raw/t3chuwNu"
    },
    {
        Title = "Тест инжектора",
        Desc = "Проверить ваш инжектор",
        Icon = "test-tube",
        Url = "https://rawscripts.net/raw/Universal-Script-UNChecker-GUI-Version-27355"
    },
    {
        Title = "Поменять сервер",
        Desc = "Быстро поменять сервер",
        Icon = "refresh-cw",
        Url = "https://raw.githubusercontent.com/Syr0nix/RedFoxServerBowser/main/Mainlua"
    }
}

-- Создание кнопок для скриптов
for _, scriptInfo in ipairs(ScriptButtons) do
    PlayerScriptsSection:Button({
        Title = scriptInfo.Title,
        Desc = scriptInfo.Desc,
        Callback = function()
            if scriptInfo.Url then
                Functions.LoadScript(scriptInfo.Url)
            elseif scriptInfo.Script then
                local success, err = pcall(loadstring(scriptInfo.Script))
                if not success then
                    WindUI:Notify({
                        Title = "Ошибка",
                        Content = "Ошибка загрузки: "..err,
                        Duration = 5,
                        Icon = "alert-circle"
                    })
                end
            end
            WindUI:Notify({
                Title = scriptInfo.Title,
                Content = "Скрипт запускается...",
                Duration = 3,
                Icon = "play"
            })
        end
    })
end

-- Специальная кнопка для добавления в друзья
PlayerScriptsSection:Button({
    Title = "Добавить всех в друзья",
    Desc = "Автоматически отправляет заявки в друзья всем игрокам",
    Callback = function()
        local plrs = game:GetService('Players')
        local count = 0
        for i,v in pairs(plrs:GetChildren()) do
            if v ~= plrs.LocalPlayer then
                task.wait(1)
                plrs.LocalPlayer:RequestFriendship(v)
                count = count + 1
            end
        end
        WindUI:Notify({
            Title = "Друзья",
            Content = "Отправлено "..count.." заявок в друзья",
            Duration = 5,
            Icon = "users"
        })
    end
})

-- WindUI Rewrite - Part 4/?
-- Продолжение переписывания скрипта из Compkiller в WindUI

-- ======== ESP ФУНКЦИИ ======== --
local COREGUI = game:GetService("CoreGui")

local function CreateESP(player, teamCheck)
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
    local espGui = Instance.new("BillboardGui")
    espGui.Name = player.Name .. "_ESP"
    espGui.AlwaysOnTop = true
    espGui.Size = UDim2.new(2, 0, 2, 0)
    espGui.StudsOffset = Vector3.new(0, 2.5, 0)
    espGui.Adornee = humanoidRootPart
    espGui.Parent = COREGUI
    
    local espFrame = Instance.new("Frame")
    espFrame.BackgroundTransparency = 1
    espFrame.Size = UDim2.new(1, 0, 1, 0)
    espFrame.Parent = espGui
    
    local espText = Instance.new("TextLabel")
    espText.Name = "ESPText"
    espText.BackgroundTransparency = 1
    espText.Size = UDim2.new(1, 0, 1, 0)
    espText.Font = Enum.Font.SourceSansBold
    espText.TextSize = 18
    espText.Text = player.Name
    espText.TextColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    espText.Parent = espFrame
    
    -- Health bar
    local healthBar = Instance.new("Frame")
    healthBar.Name = "HealthBar"
    healthBar.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    healthBar.BorderSizePixel = 0
    healthBar.Size = UDim2.new(1, 0, 0.1, 0)
    healthBar.Position = UDim2.new(0, 0, 0, -15)
    healthBar.Parent = espFrame
    
    local healthFill = Instance.new("Frame")
    healthFill.Name = "HealthFill"
    healthFill.BackgroundColor3 = Color3.new(0, 1, 0)
    healthFill.BorderSizePixel = 0
    healthFill.Size = UDim2.new(1, 0, 1, 0)
    healthFill.Parent = healthBar
    
    local function updateHealth()
        if character and character:FindFirstChild("Humanoid") then
            local humanoid = character.Humanoid
            healthFill.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
            
            -- Change color based on health
            if humanoid.Health / humanoid.MaxHealth < 0.3 then
                healthFill.BackgroundColor3 = Color3.new(1, 0, 0)
            elseif humanoid.Health / humanoid.MaxHealth < 0.6 then
                healthFill.BackgroundColor3 = Color3.new(1, 1, 0)
            else
                healthFill.BackgroundColor3 = Color3.new(0, 1, 0)
            end
        end
    end
    
    character:WaitForChild("Humanoid").HealthChanged:Connect(updateHealth)
    updateHealth()
    
    -- Box ESP
    local box = Instance.new("Frame")
    box.Name = "Box"
    box.BackgroundTransparency = 0.8
    box.BackgroundColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    box.BorderSizePixel = 1
    box.BorderColor3 = Color3.new(1, 1, 1)
    box.Size = UDim2.new(1.5, 0, 2.5, 0)
    box.Position = UDim2.new(-0.25, 0, -0.5, 0)
    box.Parent = espFrame
    
    -- Tracer
    local tracer = Instance.new("Frame")
    tracer.Name = "Tracer"
    tracer.BackgroundColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    tracer.BorderSizePixel = 0
    tracer.Size = UDim2.new(0, 1, 0, 1000)
    tracer.AnchorPoint = Vector2.new(0.5, 1)
    tracer.Position = UDim2.new(0.5, 0, 1, 0)
    tracer.Parent = espFrame
    
    player.CharacterAdded:Connect(function(newChar)
        espGui.Adornee = newChar:WaitForChild("HumanoidRootPart")
        newChar:WaitForChild("Humanoid").HealthChanged:Connect(updateHealth)
        updateHealth()
    end)
    
    player:GetPropertyChangedSignal("Team"):Connect(function()
        if teamCheck then
            espText.TextColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
            box.BackgroundColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
            tracer.BackgroundColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
        end
    end)
    
    return espGui
end

local function ESP(player, teamCheck)
    if not player.Character then
        player.CharacterAdded:Wait()
    end
    return CreateESP(player, teamCheck)
end

local function ToggleESP(teamCheck)
    if ESPenabled then
        ESPenabled = false
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                child:Destroy()
            end
        end
        
        WindUI:Notify({
            Title = "ESP",
            Content = "ESP has been disabled",
            Duration = 3,
            Icon = "eye-off"
        })
    else
        ESPenabled = true
        
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= speaker then
                ESP(player, teamCheck)
            end
        end
        
        Players.PlayerAdded:Connect(function(player)
            if ESPenabled then
                ESP(player, teamCheck)
            end
        end)
        
        WindUI:Notify({
            Title = "ESP",
            Content = "ESP has been enabled" .. (teamCheck and " (Team Check)" or ""),
            Duration = 3,
            Icon = "eye"
        })
    end
end

-- ======== ВКЛАДКА ESP ======== --
local ESPTab = Window:Tab({
    Title = "ESP Settings",
    Icon = "eye",
    Locked = false
})

-- Основные настройки ESP
local ESSettings = ESPTab:Section({
    Title = "ESP Settings",
    Opened = true
})

-- ESP Toggles
ESSettings:Toggle({
    Title = "Enable ESP",
    Desc = "Включить ESP для всех игроков",
    Value = false,
    Callback = function(state)
        ToggleESP(false)
    end
})

ESSettings:Toggle({
    Title = "Team Check",
    Desc = "Разные цвета для команды и врагов",
    Value = false,
    Callback = function(state)
        if ESPenabled then
            -- Refresh ESP with new team check setting
            ToggleESP(false) -- Turn off
            ToggleESP(state) -- Turn on with new setting
        end
    end
})

ESSettings:Toggle({
    Title = "Show Names",
    Desc = "Показывать имена игроков",
    Value = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local espText = child:FindFirstChild("Frame"):FindFirstChild("ESPText")
                if espText then
                    espText.Visible = state
                end
            end
        end
    end
})

ESSettings:Toggle({
    Title = "Show Health Bar",
    Desc = "Показывать полоску здоровья",
    Value = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local healthBar = child:FindFirstChild("Frame"):FindFirstChild("HealthBar")
                if healthBar then
                    healthBar.Visible = state
                end
            end
        end
    end
})

ESSettings:Toggle({
    Title = "Show Box",
    Desc = "Показывать рамку вокруг игроков",
    Value = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local box = child:FindFirstChild("Frame"):FindFirstChild("Box")
                if box then
                    box.Visible = state
                end
            end
        end
    end
})

ESSettings:Toggle({
    Title = "Show Tracer",
    Desc = "Показывать линии к игрокам",
    Value = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local tracer = child:FindFirstChild("Frame"):FindFirstChild("Tracer")
                if tracer then
                    tracer.Visible = state
                end
            end
        end
    end
})

-- Цвета ESP
local ESPColors = ESPTab:Section({
    Title = "ESP Colors",
    Opened = true
})

ESPColors:Colorpicker({
    Title = "Enemy Color",
    Desc = "Цвет для вражеских игроков",
    Default = Color3.fromRGB(255, 0, 0),
    Callback = function(color)
        if not ESPenabled then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local playerName = string.sub(child.Name, 1, -5)
                local player = Players:FindFirstChild(playerName)
                
                if player and player.Team ~= speaker.Team then
                    local frame = child:FindFirstChild("Frame")
                    if frame then
                        local espText = frame:FindFirstChild("ESPText")
                        local box = frame:FindFirstChild("Box")
                        local tracer = frame:FindFirstChild("Tracer")
                        
                        if espText then espText.TextColor3 = color end
                        if box then box.BackgroundColor3 = color end
                        if tracer then tracer.BackgroundColor3 = color end
                    end
                end
            end
        end
    end
})

ESPColors:Colorpicker({
    Title = "Team Color",
    Desc = "Цвет для игроков команды",
    Default = Color3.fromRGB(0, 255, 0),
    Callback = function(color)
        if not ESPenabled then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local playerName = string.sub(child.Name, 1, -5)
                local player = Players:FindFirstChild(playerName)
                
                if player and player.Team == speaker.Team then
                    local frame = child:FindFirstChild("Frame")
                    if frame then
                        local espText = frame:FindFirstChild("ESPText")
                        local box = frame:FindFirstChild("Box")
                        local tracer = frame:FindFirstChild("Tracer")
                        
                        if espText then espText.TextColor3 = color end
                        if box then box.BackgroundColor3 = color end
                        if tracer then tracer.BackgroundColor3 = color end
                    end
                end
            end
        end
    end
})

-- Настройки текста
local TextSettings = ESPTab:Section({
    Title = "Text Settings",
    Opened = true
})

local ESPTextSizeSlider = TextSettings:Slider({
    Title = "Text Size",
    Desc = "Размер текста ESP",
    Step = 1,
    Value = {
        Min = 10,
        Max = 30,
        Default = 18,
    },
    Callback = function(value)
        if not ESPenabled then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local frame = child:FindFirstChild("Frame")
                if frame then
                    local espText = frame:FindFirstChild("ESPText")
                    if espText then
                        espText.TextSize = value
                    end
                end
            end
        end
    end
})

TextSettings:Dropdown({
    Title = "Text Font",
    Desc = "Шрифт текста ESP",
    Values = {"SourceSans", "SourceSansBold", "SourceSansItalic", "Code", "Highway", "SciFi", "Arcade", "Fantasy"},
    Value = "SourceSansBold",
    Callback = function(value)
        if not ESPenabled then return end
        
        local fontMap = {
            SourceSans = Enum.Font.SourceSans,
            SourceSansBold = Enum.Font.SourceSansBold,
            SourceSansItalic = Enum.Font.SourceSansItalic,
            Code = Enum.Font.Code,
            Highway = Enum.Font.Highway,
            SciFi = Enum.Font.SciFi,
            Arcade = Enum.Font.Arcade,
            Fantasy = Enum.Font.Fantasy
        }
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local frame = child:FindFirstChild("Frame")
                if frame then
                    local espText = frame:FindFirstChild("ESPText")
                    if espText then
                        espText.Font = fontMap[value]
                    end
                end
            end
        end
    end
})

-- ======== ВКЛАДКА FLING (ТОЛЬКО WALK FLING) ======== --
local FlingTab = Window:Tab({
    Title = "Fling",
    Icon = "wind",
    Locked = false
})

-- Переменные для управления
local walkflinging = false
local antifling = nil

-- Функция включения walkfling
local function enableWalkFling()
    if walkflinging then return end
    
    walkflinging = true
    local RunService = game:GetService("RunService")
    
    local humanoid = Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        humanoid.Died:Connect(function()
            disableWalkFling()
        end)
    end
    
    while walkflinging do
        RunService.Heartbeat:Wait()
        local character = Players.LocalPlayer.Character
        local root = character and character:FindFirstChild("HumanoidRootPart")
        local vel, movel = nil, 0.1

        while not (character and character.Parent and root and root.Parent) do
            RunService.Heartbeat:Wait()
            character = Players.LocalPlayer.Character
            root = character and character:FindFirstChild("HumanoidRootPart")
        end

        vel = root.Velocity
        root.Velocity = vel * 10000 + Vector3.new(0, 10000, 0)

        RunService.RenderStepped:Wait()
        if character and character.Parent and root and root.Parent then
            root.Velocity = vel
        end

        RunService.Stepped:Wait()
        if character and character.Parent and root and root.Parent then
            root.Velocity = vel + Vector3.new(0, movel, 0)
            movel = movel * -1
        end
    end
end

-- Функция выключения walkfling
local function disableWalkFling()
    walkflinging = false
end

-- Функция включения antifling
local function enableAntiFling()
    if antifling then
        antifling:Disconnect()
        antifling = nil
    end
    
    antifling = game:GetService("RunService").Stepped:Connect(function()
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer and player.Character then
                for _, v in pairs(player.Character:GetDescendants()) do
                    if v:IsA("BasePart") then
                        v.CanCollide = false
                    end
                end
            end
        end
    end)
end

-- Функция выключения antifling
local function disableAntiFling()
    if antifling then
        antifling:Disconnect()
        antifling = nil
    end
end

-- Секция Walk Fling
local WalkFlingSection = FlingTab:Section({
    Title = "Walk Fling",
    Opened = true
})

WalkFlingSection:Toggle({
    Title = "Walk Fling",
    Desc = "Активирует Walk Fling для вашего персонажа",
    Value = false,
    Callback = function(state)
        if state then
            enableWalkFling()
            WindUI:Notify({
                Title = "Walk Fling",
                Content = "Walk Fling включен",
                Duration = 3,
                Icon = "wind"
            })
        else
            disableWalkFling()
            WindUI:Notify({
                Title = "Walk Fling",
                Content = "Walk Fling выключен",
                Duration = 3,
                Icon = "wind"
            })
        end
    end
})

-- Секция Anti Fling
local AntiFlingSection = FlingTab:Section({
    Title = "Anti Fling",
    Opened = true
})

AntiFlingSection:Toggle({
    Title = "Anti Fling",
    Desc = "Защищает от флинга других игроков",
    Value = false,
    Callback = function(state)
        if state then
            enableAntiFling()
            WindUI:Notify({
                Title = "Anti Fling",
                Content = "Anti Fling включен",
                Duration = 3,
                Icon = "shield"
            })
        else
            disableAntiFling()
            WindUI:Notify({
                Title = "Anti Fling",
                Content = "Anti Fling выключен",
                Duration = 3,
                Icon = "shield"
            })
        end
    end
})

-- Секция утилит Fling
local FlingUtilsSection = FlingTab:Section({
    Title = "Fling Utilities",
    Opened = true
})

FlingUtilsSection:Button({
    Title = "Reset Character",
    Desc = "Перезагружает вашего персонажа",
    Callback = function()
        Players.LocalPlayer.Character:BreakJoints()
        WindUI:Notify({
            Title = "Reset Character",
            Content = "Персонаж перезагружается",
            Duration = 3,
            Icon = "refresh-cw"
        })
    end
})

FlingUtilsSection:Paragraph({
    Title = "Информация о Walk Fling",
    Content = "Walk Fling создает эффект полета при ходьбе.\nAnti Fling защищает от флинга других игроков."
})

-- Автоматическое отключение при смерти
Players.LocalPlayer.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid").Died:Connect(function()
        disableWalkFling()
    end)
end)

-- ======== ВКЛАДКА КАМЕРЫ ======== --
local CameraTab = Window:Tab({
    Title = "Camera",
    Icon = "camera",
    Locked = false
})

-- Переменные для камеры
local viewing = nil
local viewDied = nil
local viewChanged = nil

-- Функция остановки фрикама (заглушка)
local function StopFreecam()
    -- Add your freecam stopping logic here if needed
end

-- Секция наблюдения
local SpectateSection = CameraTab:Section({
    Title = "Spectate",
    Opened = true
})

-- Player List Dropdown
local playerListValues = {"Select Player"}
for _, player in pairs(Players:GetPlayers()) do
    if player ~= speaker then
        table.insert(playerListValues, player.Name)
    end
end

local playerDropdown = SpectateSection:Dropdown({
    Title = "Player List",
    Desc = "Выберите игрока для наблюдения",
    Values = playerListValues,
    Value = "Select Player",
    Callback = function(selectedPlayer)
        if selectedPlayer ~= "Select Player" then
            StopFreecam()
            local player = Players:FindFirstChild(selectedPlayer)
            if player then
                if viewDied then
                    viewDied:Disconnect()
                    viewChanged:Disconnect()
                end
                viewing = player
                workspace.CurrentCamera.CameraSubject = player.Character
                WindUI:Notify({
                    Title = 'Spectate',
                    Content = 'Наблюдаем за ' .. player.Name,
                    Duration = 3,
                    Icon = 'eye'
                })
                
                local function viewDiedFunc()
                    repeat task.wait() until player.Character ~= nil and getRoot(player.Character)
                    workspace.CurrentCamera.CameraSubject = player.Character
                end
                viewDied = player.CharacterAdded:Connect(viewDiedFunc)
                
                local function viewChangedFunc()
                    workspace.CurrentCamera.CameraSubject = player.Character
                end
                viewChanged = workspace.CurrentCamera:GetPropertyChangedSignal("CameraSubject"):Connect(viewChangedFunc)
            end
        end
    end
})

-- Функция обновления списка игроков
local function updatePlayerList()
    local playerNames = {"Select Player"}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= speaker then
            table.insert(playerNames, player.Name)
        end
    end
    -- Для WindUI нужно обновить значения дропдауна
end

-- Initial update and connect to player added/removed
updatePlayerList()
Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)

-- Unspectate
SpectateSection:Button({
    Title = "Unspectate",
    Desc = "Прекратить наблюдение",
    Callback = function()
        StopFreecam()
        if viewing ~= nil then
            viewing = nil
            WindUI:Notify({
                Title = 'Spectate',
                Content = 'Наблюдение отключено',
                Duration = 3,
                Icon = 'eye-off'
            })
        end
        if viewDied then
            viewDied:Disconnect()
            viewChanged:Disconnect()
        end
        workspace.CurrentCamera.CameraSubject = speaker.Character
        playerDropdown:Set("Select Player")
    end
})

-- Секция просмотра частей
local ViewPartSection = CameraTab:Section({
    Title = "View Parts",
    Opened = true
})

-- View Part by Name
ViewPartSection:Input({
    Title = "View Part",
    Desc = "Введите название части для просмотра",
    Placeholder = "Part Name",
    Callback = function(name)
        StopFreecam()
        if name then
            for _, v in pairs(workspace:GetDescendants()) do
                if v.Name:lower() == name:lower() and v:IsA("BasePart") then
                    task.wait(0.1)
                    workspace.CurrentCamera.CameraSubject = v
                    WindUI:Notify({
                        Title = 'View Part',
                        Content = 'Наблюдаем за ' .. v.Name,
                        Duration = 3,
                        Icon = 'cube'
                    })
                    break
                end
            end
        end
    end
})

-- Return Camera to Player
ViewPartSection:Button({
    Title = "Return to Player",
    Desc = "Вернуть камеру к своему персонажу",
    Callback = function()
        StopFreecam()
        if viewing ~= nil then
            viewing = nil
        end
        if viewDied then
            viewDied:Disconnect()
            viewChanged:Disconnect()
        end
        workspace.CurrentCamera.CameraSubject = speaker.Character
        playerDropdown:Set("Select Player")
        WindUI:Notify({
            Title = 'Camera',
            Content = 'Камера возвращена к персонажу',
            Duration = 3,
            Icon = 'user'
        })
    end
})

-- Настройки камеры
local CameraSettingsSection = CameraTab:Section({
    Title = "Camera Settings",
    Opened = true
})

local FOVSliderCamera = CameraSettingsSection:Slider({
    Title = "Field of View",
    Desc = "Настройка угла обзора камеры",
    Step = 1,
    Value = {
        Min = 1,
        Max = 120,
        Default = 70,
    },
    Callback = function(value)
        workspace.CurrentCamera.FieldOfView = value
    end
})

local ZoomDistanceSlider = CameraSettingsSection:Slider({
    Title = "Max Zoom Distance",
    Desc = "Максимальное расстояние зума камеры",
    Step = 1,
    Value = {
        Min = 1,
        Max = 1000,
        Default = 400,
    },
    Callback = function(value)
        speaker.CameraMaxZoomDistance = value
    end
})

-- Fix Camera
CameraSettingsSection:Button({
    Title = "Fix Camera",
    Desc = "Исправить проблемы с камерой",
    Callback = function()
        StopFreecam()
        viewing = nil
        if viewDied then
            viewDied:Disconnect()
            viewChanged:Disconnect()
        end
        workspace.CurrentCamera:remove()
        task.wait(.1)
        repeat task.wait() until speaker.Character ~= nil
        workspace.CurrentCamera.CameraSubject = speaker.Character:FindFirstChildWhichIsA('Humanoid')
        workspace.CurrentCamera.CameraType = "Custom"
        speaker.CameraMinZoomDistance = 0.5
        speaker.CameraMaxZoomDistance = 400
        speaker.CameraMode = "Classic"
        if speaker.Character and speaker.Character:FindFirstChild("Head") then
            speaker.Character.Head.Anchored = false
        end
        playerDropdown:Set("Select Player")
        WindUI:Notify({
            Title = 'Camera',
            Content = 'Камера исправлена',
            Duration = 3,
            Icon = 'camera'
        })
    end
})

-- Shift Lock
CameraSettingsSection:Button({
    Title = "Enable Shift Lock",
    Desc = "Включить блокировку камеры Shift",
    Callback = function()
        speaker.DevEnableMouseLock = true
        WindUI:Notify({
            Title = 'Shiftlock',
            Content = 'Shift lock теперь доступен',
            Duration = 3,
            Icon = 'lock'
        })
    end
})

-- WindUI Rewrite - Part 5/5
-- Финальная часть переписывания скрипта из Compkiller в WindUI

-- ======== ВКЛАДКА SLAP BATTLES ======== --
local SlapBattlesTab = Window:Tab({
    Title = "Slap Battles",
    Icon = "hand",
    Locked = false
})

local SlapBattlesSection = SlapBattlesTab:Section({
    Title = "Эксклюзивные скрипты",
    Opened = true
})

SlapBattlesSection:Button({
    Title = "Хитбоксы",
    Desc = "Увеличивает зону поражения",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Bilmemi/hitbox2/main/op")
    end
})

SlapBattlesSection:Button({
    Title = "Авто-автобус",
    Desc = "Автоматически использует способность автобуса",
    Callback = function()
        while task.wait(6) do
            game:GetService("ReplicatedStorage"):WaitForChild("busmoment"):FireServer()
        end
        WindUI:Notify({
            Title = "Auto Bus",
            Content = "Авто-автобус активирован",
            Duration = 3,
            Icon = "bus"
        })
    end
})

SlapBattlesSection:Button({
    Title = "Бесконечное Уно",
    Desc = "Постоянно активирует способность Уно",
    Callback = function()
        while task.wait(6) do
            game:GetService("ReplicatedStorage"):WaitForChild("ReverseAbility"):FireServer()
        end
        WindUI:Notify({
            Title = "Infinite Uno",
            Content = "Бесконечное Уно активировано",
            Duration = 3,
            Icon = "rotate-ccw"
        })
    end
})

SlapBattlesSection:Button({
    Title = "Аура убийства",
    Desc = "Автоматическая атака ближайших игроков",
    Callback = function()
        local json = game:HttpGet("https://raw.githubusercontent.com/LeoKholYt/lkhub/main/list.json")
        local jsonData = game:GetService("HttpService"):JSONDecode(json)
        local url = jsonData[tostring(game.PlaceId)] or "universal.lua"
        url = url.s or url
        Functions.LoadScript("https://lkhub.net/s/"..url)
    end
})

-- ======== ВКЛАДКА LUMBER TYCOON 2 ======== --
local LumberTycoonTab = Window:Tab({
    Title = "Lumber Tycoon 2",
    Icon = "tree-pine",
    Locked = false
})

local LumberTycoonSection = LumberTycoonTab:Section({
    Title = "Фарм-скрипты",
    Opened = true
})

LumberTycoonSection:Button({
    Title = "Kron Hub",
    Desc = "Лучший скрипт для автоматизации",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/DevKron/Kron_Hub/main/version_1.0")
    end
})

LumberTycoonSection:Button({
    Title = "LT2 LuaWare",
    Desc = "Оптимизированный скрипт для мобильных устройств",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/frencaliber/LuaWareLoader.lw/main/luawareloader.wtf")
    end
})

LumberTycoonSection:Button({
    Title = "LT2 Better Script",
    Desc = "Улучшенная версия для ПК",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Butterisgood/Butter/main/Root2.lua")
    end
})

LumberTycoonSection:Button({
    Title = "Удалить защитные стены",
    Desc = "Убирает защитные барьеры",
    Callback = function()
        while task.wait() do
            game:GetService("Workspace").Effects:Destroy()
        end
        WindUI:Notify({
            Title = "LT2",
            Content = "Защитные стены удаляются",
            Duration = 3,
            Icon = "shield-off"
        })
    end
})

-- ======== ВКЛАДКА MURDER MYSTERY 2 ======== --
local MM2Tab = Window:Tab({
    Title = "Murder Mystery 2",
    Icon = "sword",
    Locked = false
})

local MM2Section = MM2Tab:Section({
    Title = "Скрипты для MM2",
    Opened = true
})

MM2Section:Button({
    Title = "Лучший скрипт для MM2",
    Desc = "Различные функции для Murder Mystery 2",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/FOGOTY/mm2-piano-reborn/main/scr")
    end
})

-- ======== ВКЛАДКА ОГАЙО ======== --
local OhioTab = Window:Tab({
    Title = "Огайо",
    Icon = "map",
    Locked = false
})

local OhioSection = OhioTab:Section({
    Title = "Функции для Огайо",
    Opened = true
})

OhioSection:Button({
    Title = "ESP игроков",
    Desc = "Показывает игроков через стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

OhioSection:Button({
    Title = "Авто-фарм хлама V2",
    Desc = "Автоматически собирает ресурсы",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/HNwdknXk")
    end
})

OhioSection:Button({
    Title = "Автофарм банкоматов",
    Desc = "Автоматический сбор денег",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/szznrYvx")
    end
})

OhioSection:Button({
    Title = "ТП по CTRL+Клик",
    Desc = "Телепортация к месту клика",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/icB69Hhf")
    end
})

OhioSection:Button({
    Title = "ТП к местам",
    Desc = "Быстрая телепортация по локациям",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/nrJ7cVcJ")
    end
})

OhioSection:Button({
    Title = "Мини хаб",
    Desc = "Коллекция скриптов для Огайо",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/fef2FzGc")
    end
})

OhioSection:Button({
    Title = "Скрипт для Ohio",
    Desc = "Универсальный скрипт для Ohio",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/JENqZVm5")
    end
})

-- ======== ВКЛАДКА KAT ======== --
local KatTab = Window:Tab({
    Title = "Kat",
    Icon = "contact",
    Locked = false
})

local KatSection = KatTab:Section({
    Title = "Функции для Kat",
    Opened = true
})

local KatWalkSpeedSlider = KatSection:Slider({
    Title = "Скорость передвижения",
    Desc = "Настройка скорости персонажа в Kat",
    Step = 1,
    Value = {
        Min = 0,
        Max = 100,
        Default = 16,
    },
    Callback = function(value)
        _G.Walk = value
        _G.WalkSpeedEnabled = true
        
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
    end
})

local KatJumpPowerSlider = KatSection:Slider({
    Title = "Прыгучесть",
    Desc = "Настройка высоты прыжка в Kat",
    Step = 1,
    Value = {
        Min = 0,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.JumpPower = value
            end
        end
    end
})

local KatFOVSlider = KatSection:Slider({
    Title = "Поле зрения",
    Desc = "Настройка угла обзора камеры в Kat",
    Step = 1,
    Value = {
        Min = 0,
        Max = 120,
        Default = 70,
    },
    Callback = function(value)
        if workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = value
        end
    end
})

KatSection:Button({
    Title = "Удалить стены",
    Desc = "Убирает препятствия на карте",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/FBKJTUyw")
    end
})

KatSection:Button({
    Title = "Kill Aura",
    Desc = "Автоматическая атака врагов",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/mk1ge1hm")
    end
})

KatSection:Button({
    Title = "ESP",
    Desc = "Видеть сквозь стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

KatSection:Button({
    Title = "Падение на месте (R)",
    Desc = "Падать без перемещения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/CTUaCKN1")
    end
})

-- ======== ВКЛАДКА JAILBREAK ======== --
local JailbreakTab = Window:Tab({
    Title = "Jailbreak",
    Icon = "shield",
    Locked = false
})

local JailbreakSection = JailbreakTab:Section({
    Title = "Функции для Jailbreak",
    Opened = true
})

JailbreakSection:Button({
    Title = "Автофарм",
    Desc = "Автоматический сбор денег",
    Callback = function()
        Functions.LoadScript("http://scripts.projectauto.xyz/AutoRobV5")
    end
})

JailbreakSection:Button({
    Title = "Ускорение",
    Desc = "Увеличение скорости передвижения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/P8VjFPsQ")
    end
})

JailbreakSection:Button({
    Title = "ESP",
    Desc = "Видеть сквозь стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

JailbreakSection:Button({
    Title = "ТП по CTRL+Клик",
    Desc = "Телепортация к выбранной точке",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/icB69Hhf")
    end
})

-- ======== ВКЛАДКА A DUSTY TRIP ======== --
local DustyTripTab = Window:Tab({
    Title = "A Dusty Trip",
    Icon = "car",
    Locked = false
})

local DustyTripSection = DustyTripTab:Section({
    Title = "Функции для A Dusty Trip",
    Opened = true
})

DustyTripSection:Button({
    Title = "Скорость 5000",
    Desc = "Экстремальная скорость передвижения",
    Callback = function()
        _G.Walk = 5000
        _G.WalkSpeedEnabled = true
        WindUI:Notify({
            Title = "Speed",
            Content = "Скорость установлена на 5000",
            Duration = 3,
            Icon = "zap"
        })
    end
})

DustyTripSection:Button({
    Title = "Скорость 1000",
    Desc = "Очень высокая скорость",
    Callback = function()
        _G.Walk = 1000
        _G.WalkSpeedEnabled = true
        WindUI:Notify({
            Title = "Speed",
            Content = "Скорость установлена на 1000",
            Duration = 3,
            Icon = "zap"
        })
    end
})

DustyTripSection:Button({
    Title = "Скорость 50",
    Desc = "Умеренное ускорение",
    Callback = function()
        _G.Walk = 50
        _G.WalkSpeedEnabled = true
        WindUI:Notify({
            Title = "Speed",
            Content = "Скорость установлена на 50",
            Duration = 3,
            Icon = "zap"
        })
    end
})

DustyTripSection:Button({
    Title = "Скорость 25",
    Desc = "Небольшое ускорение",
    Callback = function()
        _G.Walk = 25
        _G.WalkSpeedEnabled = true
        WindUI:Notify({
            Title = "Speed",
            Content = "Скорость установлена на 25",
            Duration = 3,
            Icon = "zap"
        })
    end
})

DustyTripSection:Button({
    Title = "Полёт на машине (V)",
    Desc = "Летать на транспорте",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/9bNj1EcR")
    end
})

-- ======== ВКЛАДКА BUILD A BOAT ======== --
local BuildBoatTab = Window:Tab({
    Title = "Build A Boat",
    Icon = "sailboat",
    Locked = false
})

local BuildBoatSection = BuildBoatTab:Section({
    Title = "Функции для Build A Boat",
    Opened = true
})

BuildBoatSection:Button({
    Title = "Автофарм",
    Desc = "Автоматический сбор ресурсов",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/24e7Skmv")
    end
})

BuildBoatSection:Button({
    Title = "Хаб-скрипт",
    Desc = "Пароль: N-314159",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/novakoolhub/Scripts/main/Scripts/NovBoatR1")
    end
})

BuildBoatSection:Button({
    Title = "Полёт (F)",
    Desc = "Активировать возможность летать",
    Callback = function()
        loadstring("\108\111\97\100\115\116\114\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\40\39\104\116\116\112\115\58\47\47\103\105\115\116\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\109\101\111\122\111\110\101\89\84\47\98\102\48\51\55\100\102\102\57\102\48\97\55\48\48\49\55\51\48\52\100\100\100\54\55\102\100\99\100\51\55\48\47\114\97\119\47\101\49\52\101\55\52\102\52\50\53\98\48\54\48\100\102\53\50\51\51\52\51\99\102\51\48\98\55\56\55\48\55\52\101\98\51\99\53\100\50\47\97\114\99\101\117\115\37\50\53\50\48\120\37\50\53\50\48\102\108\121\37\50\53\50\48\50\37\50\53\50\48\111\98\102\108\117\99\97\116\111\114\39\41\44\116\114\117\101\41\41\40\41\10\10")()
    end
})

-- ======== ВКЛАДКА ВЫРАСТИ САД ======== --
local GrowGardenTab = Window:Tab({
    Title = "Вырасти сад",
    Icon = "flower",
    Locked = false
})

local GrowGardenSection = GrowGardenTab:Section({
    Title = "Функции для Вырасти сад",
    Opened = true
})

GrowGardenSection:Button({
    Title = "Автофарм",
    Desc = "Автоматический сбор растений",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/UZU3cmQZ")
    end
})

GrowGardenSection:Button({
    Title = "Хаб скриптов",
    Desc = "Коллекция функций для игры",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/ameicaa1/Grow-a-Garden/main/Grow_A_Garden.lua")
    end
})

GrowGardenSection:Button({
    Title = "Ускорение",
    Desc = "Увеличение скорости передвижения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/Zzqq3U0u")
    end
})

-- ======== ВКЛАДКА DIG TO EARTH'S CORE ======== --
local DigToCoreTab = Window:Tab({
    Title = "Dig to Earth's CORE",
    Icon = "shovel",
    Locked = false
})

local DigToCoreSection = DigToCoreTab:Section({
    Title = "Функции для Dig to Earth's CORE",
    Opened = true
})

DigToCoreSection:Button({
    Title = "Выдать деньги",
    Desc = "Добавляет игровую валюту",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.AddRewardEvent:FireServer("Cash", 241561515)
        WindUI:Notify({
            Title = "Dig to Core",
            Content = "Деньги выданы",
            Duration = 3,
            Icon = "dollar-sign"
        })
    end
})

DigToCoreSection:Button({
    Title = "Выдать спины",
    Desc = "Добавляет спины для рулетки",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.AddRewardEvent:FireServer("Spins", 51)
        WindUI:Notify({
            Title = "Dig to Core",
            Content = "Спины выданы",
            Duration = 3,
            Icon = "refresh-cw"
        })
    end
})

DigToCoreSection:Button({
    Title = "Выдать петов",
    Desc = "Добавляет редких питомцев",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.PetCageEvent:FireServer("Lava Dominus")
        WindUI:Notify({
            Title = "Dig to Core",
            Content = "Петы выданы",
            Duration = 3,
            Icon = "heart"
        })
    end
})

-- ======== ВКЛАДКА HUMAN KEBABS ======== --
local HumanKebabsTab = Window:Tab({
    Title = "Human Kebabs",
    Icon = "meh",
    Locked = false
})

local HumanKebabsSection = HumanKebabsTab:Section({
    Title = "Функции для Human Kebabs",
    Opened = true
})

HumanKebabsSection:Button({
    Title = "Kill All",
    Desc = "Автоматически атакует всех игроков",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local running = true
        
        _G.StopAutoSkewer = function()
            running = false
            return "Скрипт остановлен!"
        end
        
        task.spawn(function()
            while running do
                task.wait(0.1)
                for _, target in ipairs(game:GetService("Players"):GetPlayers()) do
                    if target ~= player and target.Character then
                        game:GetService("ReplicatedStorage").Remotes.Client.SkewerHit:FireServer(target)
                    end
                end
            end
        end)
        WindUI:Notify({
            Title = "Human Kebabs",
            Content = "Kill All активирован",
            Duration = 3,
            Icon = "target"
        })
    end
})

HumanKebabsSection:Button({
    Title = "Остановить Kill All",
    Desc = "Прекращает автоматическую атаку",
    Callback = function()
        if _G.StopAutoSkewer then
            _G.StopAutoSkewer()
            WindUI:Notify({
                Title = "Human Kebabs",
                Content = "Kill All остановлен",
                Duration = 3,
                Icon = "square"
            })
        end
    end
})

-- ======== ВКЛАДКА AIMBOT ======== --
local AimbotTab = Window:Tab({
    Title = "Aimbot",
    Icon = "crosshair",
    Locked = false
})

local AimbotSection = AimbotTab:Section({
    Title = "Настройки Aimbot",
    Opened = true
})

local aimbotEnabled = false
local aimParts = {"Head"}
local aimFov = 100
local smoothing = 0.05
local prediction = 0.1
local wallCheck = true
local teamCheck = false

AimbotSection:Toggle({
    Title = "Включить Aimbot",
    Desc = "Активировать автоматическое прицеливание",
    Value = false,
    Callback = function(v)
        aimbotEnabled = v
    end
})

AimbotSection:Dropdown({
    Title = "Часть тела",
    Desc = "Выберите часть тела для прицеливания",
    Values = {"Head", "HumanoidRootPart", "Torso"},
    Value = "Head",
    Callback = function(v)
        aimParts = {v}
    end
})

AimbotSection:Slider({
    Title = "Поле зрения",
    Desc = "Угол обзора для обнаружения целей",
    Min = 10,
    Max = 500,
    Default = 100,
    Callback = function(v)
        aimFov = v
    end
})

AimbotSection:Slider({
    Title = "Сглаживание",
    Desc = "Плавность движения прицела",
    Min = 1,
    Max = 100,
    Default = 5,
    Callback = function(v)
        smoothing = v / 100
    end
})

AimbotSection:Toggle({
    Title = "Проверка стен",
    Desc = "Не целиться сквозь стены",
    Value = true,
    Callback = function(v)
        wallCheck = v
    end
})

AimbotSection:Toggle({
    Title = "Проверка команды",
    Desc = "Не целиться в своих",
    Value = false,
    Callback = function(v)
        teamCheck = v
    end
})

-- ======== ВКЛАДКА НАСТРОЙКИ ======== --
local SettingsTab = Window:Tab({
    Title = "Настройки",
    Icon = "settings",
    Locked = false
})

local UISettings = SettingsTab:Section({
    Title = "Настройки интерфейса",
    Opened = true
})

UISettings:Toggle({
    Title = "Всегда показывать UI",
    Desc = "Отключает автоматическое скрытие интерфейса",
    Value = false,
    Callback = function(v)
        -- WindUI автоматически управляет этим
    end
})

UISettings:Colorpicker({
    Title = "Цвет интерфейса",
    Desc = "Изменяет основной цвет элементов",
    Default = Color3.fromRGB(82, 82, 91),
    Callback = function(v)
        -- Можно добавить изменение темы если нужно
    end
})

UISettings:Button({
    Title = "Сохранить настройки",
    Desc = "Сохранить текущие настройки",
    Callback = function()
        WindUI:Notify({
            Title = "Настройки",
            Content = "Настройки сохранены!",
            Duration = 3,
            Icon = "save"
        })
    end
})

UISettings:Button({
    Title = "Загрузить настройки",
    Desc = "Загрузить сохраненные настройки",
    Callback = function()
        WindUI:Notify({
            Title = "Настройки",
            Content = "Настройки загружены!",
            Duration = 3,
            Icon = "download"
        })
    end
})

UISettings:Button({
    Title = "Сбросить настройки",
    Desc = "Вернуть настройки по умолчанию",
    Callback = function()
        WindUI:SetTheme("1Qlua Theme")
        WindUI:Notify({
            Title = "Настройки",
            Content = "Настройки сброшены!",
            Duration = 3,
            Icon = "refresh-cw"
        })
    end
})

-- ======== ФИНАЛЬНОЕ УВЕДОМЛЕНИЕ ======== --
WindUI:Notify({
    Title = "1Qlua - WindUI",
    Content = "Универсальный хаб успешно загружен!\nВсе функции доступны для использования.",
    Duration = 8,
    Icon = "check-circle"
})

-- ======== ВОДЯНОЙ ЗНАК ======== --
Window:Tag({
    Title = "v19",
    Icon = "github",
    Color = Color3.fromHex("#30ff6a"),
    Radius = 8,
})

print("🎉 1Qlua WindUI версия успешно загружена!")
print("📁 Папка: 1QluaHub")
print("🎨 Тема: 1Qlua Theme")
print("🔧 Все вкладки и функции готовы к использованию!")

-- Переписывание завершено!
