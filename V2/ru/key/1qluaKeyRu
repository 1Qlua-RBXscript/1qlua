-- ======== НАСТРОЙКИ ======== --
local SETTINGS = {
    WALK_SPEED = {
        DEFAULT = 16,
        MIN = 0,
        MAX = 150
    },
    JUMP_POWER = {
        DEFAULT = 50,
        MIN = 0,
        MAX = 500
    },
    FOV = {
        DEFAULT = 70,
        MIN = 0,
        MAX = 120
    },
    TIME = {
        DEFAULT = 12,
        MIN = 0,
        MAX = 24
    }
}

-- Variables
local ESPenabled = false
local CHMSenabled = false -- Assuming you have chams elsewhere
local speaker = game.Players.LocalPlayer

-- Глобальные переменные
_G.Walk = SETTINGS.WALK_SPEED.DEFAULT
_G.WalkSpeedEnabled = true

local Players = game:GetService("Players")
local COREGUI = game:GetService("CoreGui")

-- ======== ИНИЦИАЛИЗАЦИЯ БИБЛИОТЕКИ ======== --
local Compkiller = loadstring(game:HttpGet("https://raw.githubusercontent.com/4lpaca-pin/CompKiller/refs/heads/main/src/source.luau"))()
local Notifier = Compkiller.newNotify()
local ConfigManager = Compkiller:ConfigManager({
    Directory = "1Qlua-Config",
    Config = "Main-Config"
})

-- Загрузка интерфейса
Compkiller:Loader("rbxassetid://80494437171393", 2.5).yield()

-- ======== СОЗДАНИЕ ОКНА ======== --
local Window = Compkiller.new({
    Name = "1Qlua - Универсальный хаб",
    Keybind = "LeftAlt",
    Logo = "rbxassetid://80494437171393",
    Scale = Compkiller.Scale.Window,
    TextSize = 15,
})

-- Уведомление при запуске
Notifier.new({
    Title = "1Qlua",
    Content = "Универсальный хаб скриптов загружен!",
    Duration = 8,
    Icon = "rbxassetid://80494437171393"
})

-- ======== ВОДЯНОЙ ЗНАК ======== --
local Watermark = Window:Watermark()
Watermark:AddText({
    Icon = "user",
    Text = "1Qlua",
})
Watermark:AddText({
    Icon = "server",
    Text = "Версия 19",
})
Watermark:AddText({
    Icon = "clock",
    Text = Compkiller:GetDate(),
})

-- ======== ОБРАБОТЧИК СКОРОСТИ ======== --
local Heartbeat = game:GetService("RunService").Heartbeat
local Player = game:GetService("Players").LocalPlayer

local function UpdateSpeed()
    if not _G.WalkSpeedEnabled then return end
    local character = Player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = _G.Walk
        end
    end
end

Heartbeat:Connect(UpdateSpeed)
Player.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid")
    UpdateSpeed()
end)

-- ======== ФУНКЦИИ ======== --
local Functions = {}

Functions.JumpPower = function(value)
    local humanoid = Player.Character and Player.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = value
    end
    Player.CharacterAdded:Connect(function(character)
        character:WaitForChild("Humanoid").JumpPower = value
    end)
end

Functions.FOV = function(value)
    workspace.CurrentCamera.FieldOfView = value
    workspace:GetPropertyChangedSignal("CurrentCamera"):Connect(function()
        if workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = value
        end
    end)
end

Functions.TimeOfDay = function(hours)
    local Lighting = game:GetService("Lighting")
    Lighting.ClockTime = hours % 12 == 0 and 12 or hours % 12
end

Functions.LoadScript = function(url)
    local success, err = pcall(loadstring(game:HttpGet(url)))
    if not success then
        Notifier.new({
            Title = "Ошибка",
            Content = "Ошибка загрузки: "..err,
            Duration = 5,
            Icon = "rbxassetid://7734068321"
        })
    end
end

-- ======== ВКЛАДКИ ======== --
Window:DrawCategory({Name = "Основные"})

-- Вкладка Игрока
local PlayerTab = Window:DrawTab({
    Name = "Игрок",
    Icon = "user",
    EnableScrolling = true
})

local PlayerMainSection = PlayerTab:DrawSection({
    Name = "Основные настройки",
    Position = "left"
})

PlayerMainSection:AddSlider({
    Name = "Скорость передвижения",
    Description = "Изменяет скорость вашего персонажа",
    Min = 0,
    Max = 150,
    Default = 16,
    Callback = function(v) _G.Walk = v end
})

PlayerMainSection:AddSlider({
    Name = "Высота прыжка",
    Description = "Изменяет высоту прыжка персонажа",
    Min = 0,
    Max = 500,
    Default = 50,
    Callback = Functions.JumpPower
})

PlayerMainSection:AddSlider({
    Name = "Поле зрения (FOV)",
    Description = "Изменяет угол обзора камеры",
    Min = 0,
    Max = 120,
    Default = 70,
    Callback = Functions.FOV
})

PlayerMainSection:AddSlider({
    Name = "Время суток",
    Description = "Изменяет текущее время в игре",
    Min = 0,
    Max = 24,
    Default = 12,
    Callback = Functions.TimeOfDay
})

local HitboxSection = PlayerTab:DrawSection({
    Name = "Main Settings",
    Position = 'left'
});

-- Переменные для хранения настроек
local hitboxEnabled = false
local currentPlayers = {}
local hitboxSize = 2
local hitboxTransparency = 0.4
local selectedPlayerOptions = {"All"}

-- Функция для получения списка игроков
local function getPlayerList()
    local players = {}
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            table.insert(players, player.Name)
        end
    end
    return players
end

-- Функция для обновления хитбоксов
local function updateHitboxes()
    for _, player in pairs(game.Players:GetPlayers()) do
        if player.Character and player.Character:FindFirstChild('HumanoidRootPart') then
            local root = player.Character.HumanoidRootPart
            
            -- Проверяем, должен ли этот игрок иметь хитбокс
            local shouldHaveHitbox = false
            if hitboxEnabled then
                if table.find(selectedPlayerOptions, "All") then
                    shouldHaveHitbox = (player ~= game.Players.LocalPlayer)
                else
                    local isEnemy = not player.Team or player.Team ~= game.Players.LocalPlayer.Team
                    if table.find(selectedPlayerOptions, "Enemies") and isEnemy then
                        shouldHaveHitbox = true
                    elseif table.find(selectedPlayerOptions, "Team") and not isEnemy then
                        shouldHaveHitbox = true
                    elseif table.find(selectedPlayerOptions, player.Name) then
                        shouldHaveHitbox = true
                    end
                end
            end
            
            if shouldHaveHitbox then
                root.Size = Vector3.new(hitboxSize, hitboxSize, hitboxSize)
                root.Transparency = hitboxTransparency
            else
                root.Size = Vector3.new(2, 1, 1)
                root.Transparency = 1
            end
        end
    end
end

-- Тоггл для включения/выключения хитбоксов
HitboxSection:AddToggle({
    Name = "Enable Hitboxes",
    Flag = "Hitbox_Enabled",
    Default = false,
    Callback = function(value)
        hitboxEnabled = value
        updateHitboxes()
    end
})

-- Слайдер для размера хитбокса
HitboxSection:AddSlider({
    Name = "Hitbox Size",
    Min = 1,
    Max = 10,
    Default = 2,
    Round = 1,
    Flag = "Hitbox_Size",
    Callback = function(value)
        hitboxSize = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

-- Слайдер для прозрачности
HitboxSection:AddSlider({
    Name = "Transparency",
    Min = 0,
    Max = 1,
    Default = 0.4,
    Round = 0.1,
    Flag = "Hitbox_Transparency",
    Callback = function(value)
        hitboxTransparency = value
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

-- Выбор игроков
local playerOptions = {"All", "Enemies", "Team"}
local playerNames = getPlayerList()
for _, name in pairs(playerNames) do
    table.insert(playerOptions, name)
end

HitboxSection:AddDropdown({
    Name = "Select Players",
    Default = {"All"},
    Multi = true,
    Flag = "Hitbox_Players",
    Values = playerOptions,
    Callback = function(selected)
        selectedPlayerOptions = selected
        if hitboxEnabled then
            updateHitboxes()
        end
    end
})

-- Кнопка для обновления списка игроков
HitboxSection:AddButton({
    Name = "Refresh Players",
    Callback = function()
        playerOptions = {"All", "Enemies", "Team"}
        playerNames = getPlayerList()
        for _, name in pairs(playerNames) do
            table.insert(playerOptions, name)
        end
        
        -- Сохраняем текущий выбор
        local currentSelection = selectedPlayerOptions
        updateHitboxes()
    end
})

-- Автоматическое обновление при появлении новых игроков
game.Players.PlayerAdded:Connect(function(player)
    playerOptions = {"All", "Enemies", "Team"}
    playerNames = getPlayerList()
    for _, name in pairs(playerNames) do
        table.insert(playerOptions, name)
    end
end)

game.Players.PlayerRemoving:Connect(function(player)
    playerOptions = {"All", "Enemies", "Team"}
    playerNames = getPlayerList()
    for _, name in pairs(playerNames) do
        table.insert(playerOptions, name)
    end
end)


-- Переменные для CFly
local CFlyEnabled = false
local CFlySpeed = 50
local CFlyLoop = nil
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local head = character:WaitForChild("Head")

-- Функция включения CFly
local function EnableCFly()
    if CFlyLoop then CFlyLoop:Disconnect() end
    
    humanoid.PlatformStand = true
    head.Anchored = true
    
    CFlyLoop = game:GetService("RunService").Heartbeat:Connect(function(deltaTime)
        if not character or not humanoid or not head then return end
        
        local moveDirection = humanoid.MoveDirection * (CFlySpeed * deltaTime)
        local headCF = head.CFrame
        local cameraCF = workspace.CurrentCamera.CFrame
        
        -- Вычисляем смещение камеры относительно головы
        local cameraOffset = headCF:ToObjectSpace(cameraCF).Position
        
        -- Корректируем позицию камеры
        cameraCF = cameraCF * CFrame.new(-cameraOffset.X, -cameraOffset.Y, -cameraOffset.Z + 1)
        
        -- Получаем позиции камеры и головы
        local cameraPos = cameraCF.Position
        local headPos = headCF.Position
        
        -- Вычисляем новую позицию головы
        local lookCF = CFrame.new(cameraPos, Vector3.new(headPos.X, cameraPos.Y, headPos.Z))
        local objectSpaceVelocity = lookCF:VectorToObjectSpace(moveDirection)
        
        -- Применяем новую позицию
        head.CFrame = CFrame.new(headPos) * (cameraCF - cameraPos) * CFrame.new(objectSpaceVelocity)
    end)
end

-- Функция выключения CFly
local function DisableCFly()
    if CFlyLoop then
        CFlyLoop:Disconnect()
        CFlyLoop = nil
    end
    
    if humanoid then
        humanoid.PlatformStand = false
    end
    
    if head then
        head.Anchored = false
    end
end

-- Автоматическое отключение при смерти
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = newChar:WaitForChild("Humanoid")
    head = newChar:WaitForChild("Head")
    
    if CFlyEnabled then
        DisableCFly()
        EnableCFly() -- Перезапускаем CFly
    end
end)

-- Секция для CFly
local CFlySection = PlayerTab:DrawSection({
    Name = "Camera Fly",
    Position = 'left'
})

-- Переключатель CFly
local CFlyToggle = CFlySection:AddToggle({
    Name = "Enable Camera Fly",
    Flag = "CFly_Toggle",
    Default = false,
    Callback = function(enabled)
        CFlyEnabled = enabled
        
        if enabled then
            EnableCFly()
        else
            DisableCFly()
        end
    end
})

-- Ползунок скорости CFly
CFlySection:AddSlider({
    Name = "CFly Speed",
    Min = 10,
    Max = 500,
    Default = 50,
    Round = 0,
    Flag = "CFly_Speed",
    Callback = function(speed)
        CFlySpeed = speed
    end
})


local PlayerScriptsSection = PlayerTab:DrawSection({
    Name = "Основные скрипты",
    Position = "right"
})

PlayerScriptsSection:AddButton({
    Name = "Infinite Yield",
    Description = "Мощные админ-команды для управления игрой",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Infinite-Store/Infinite-Store/main/main.lua")
    end
})

PlayerScriptsSection:AddButton({
    Name = "f3x",
    Description = "Прикольный кубик",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/f3x.lua")
    end
})

PlayerScriptsSection:AddButton({
    Name = "DEX Explorer",
    Description = "Инструмент для исследования игровых объектов",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Полёт (F)",
    Description = "Включение режима полёта по нажатию F",
    Callback = function()
        loadstring("\108\111\97\100\115\116\114\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\40\39\104\116\116\112\115\58\47\47\103\105\115\116\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\109\101\111\122\111\110\101\89\84\47\98\102\48\51\55\100\102\102\57\102\48\97\55\48\48\49\55\51\48\52\100\100\100\54\55\102\100\99\100\51\55\48\47\114\97\119\47\101\49\52\101\55\52\102\52\50\53\98\48\54\48\100\102\53\50\51\51\52\51\99\102\51\48\98\55\56\55\48\55\52\101\98\51\99\53\100\50\47\97\114\99\101\117\115\37\50\53\50\48\120\37\50\53\50\48\102\108\121\37\50\53\50\48\50\37\50\53\50\48\111\98\102\108\117\99\97\116\111\114\39\41\44\116\114\117\101\41\41\40\41\10\10")()
    end
})

PlayerScriptsSection:AddButton({
    Name = "Невидимость (E)",
    Description = "Делает вашего персонажа невидимым",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/VtWhnEnm")
    end
})

PlayerScriptsSection:AddButton({
    Name = "ТП к игрокам",
    Description = "Телепортироваться к другим игрокам",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/z4HARAHs")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Играть с писюном",
    Description = "Добавляет анимацию для развлечения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/73RsNXY2")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Удалить стены",
    Description = "Удаляет препятствия в игре",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/FBKJTUyw")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Падение на месте (R)",
    Description = "Персонаж падает на месте без движения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/CTUaCKN1")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Свободная камера (Shift+P)",
    Description = "Отключает привязку камеры к персонажу",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/ct8Kq5F0")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Полет на машине (V)",
    Description = "Позволяет транспорту летать",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/9bNj1EcR")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Добавить всех в друзья",
    Description = "Автоматически отправляет заявки в друзья",
    Callback = function()
        local plrs = game:GetService('Players')
        for i,v in pairs(plrs:GetChildren()) do
            task.wait(1)
            plrs.LocalPlayer:RequestFriendship(v)
        end
    end
})

PlayerScriptsSection:AddButton({
    Name = "Чекпойнты",
    Description = "Создает точки для быстрой телепортации",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/rz7uUmED")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Обход голосового чата",
    Description = "Позволяет обойти ограничения голосового чата",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/CorpseCMD/MyScripts/main/VoicechatBypass.lua")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Шейдеры",
    Description = "Улучшает визуальные эффекты игры",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/1XA5qM3D")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Sigma Spy",
    Description = "Мониторинг игровых событий",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/depthso/Sigma-Spy/main/Main.lua")
    end
})

PlayerScriptsSection:AddButton({
    Name = "English version",
    Description = "Переключиться на английскую версию",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/32k6f2Ns")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Админ Команды от 1qlua",
    Description = "Набор административных команд",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/t3chuwNu")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Тест инжектора",
    Description = "Проверить ваш инжектор",
    Callback = function()
        Functions.LoadScript("https://rawscripts.net/raw/Universal-Script-UNChecker-GUI-Version-27355")
    end
})

PlayerScriptsSection:AddButton({
    Name = "Поменять сервер",
    Description = "Быстро поменять сервер",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Syr0nix/RedFoxServerBowser/main/Mainlua")
    end
})

-- ESP Functions
local function CreateESP(player, teamCheck)
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
    local espGui = Instance.new("BillboardGui")
    espGui.Name = player.Name .. "_ESP"
    espGui.AlwaysOnTop = true
    espGui.Size = UDim2.new(2, 0, 2, 0)
    espGui.StudsOffset = Vector3.new(0, 2.5, 0)
    espGui.Adornee = humanoidRootPart
    espGui.Parent = COREGUI
    
    local espFrame = Instance.new("Frame")
    espFrame.BackgroundTransparency = 1
    espFrame.Size = UDim2.new(1, 0, 1, 0)
    espFrame.Parent = espGui
    
    local espText = Instance.new("TextLabel")
    espText.Name = "ESPText"
    espText.BackgroundTransparency = 1
    espText.Size = UDim2.new(1, 0, 1, 0)
    espText.Font = Enum.Font.SourceSansBold
    espText.TextSize = 18
    espText.Text = player.Name
    espText.TextColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    espText.Parent = espFrame
    
    -- Health bar
    local healthBar = Instance.new("Frame")
    healthBar.Name = "HealthBar"
    healthBar.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    healthBar.BorderSizePixel = 0
    healthBar.Size = UDim2.new(1, 0, 0.1, 0)
    healthBar.Position = UDim2.new(0, 0, 0, -15)
    healthBar.Parent = espFrame
    
    local healthFill = Instance.new("Frame")
    healthFill.Name = "HealthFill"
    healthFill.BackgroundColor3 = Color3.new(0, 1, 0)
    healthFill.BorderSizePixel = 0
    healthFill.Size = UDim2.new(1, 0, 1, 0)
    healthFill.Parent = healthBar
    
    local function updateHealth()
        if character and character:FindFirstChild("Humanoid") then
            local humanoid = character.Humanoid
            healthFill.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
            
            -- Change color based on health
            if humanoid.Health / humanoid.MaxHealth < 0.3 then
                healthFill.BackgroundColor3 = Color3.new(1, 0, 0)
            elseif humanoid.Health / humanoid.MaxHealth < 0.6 then
                healthFill.BackgroundColor3 = Color3.new(1, 1, 0)
            else
                healthFill.BackgroundColor3 = Color3.new(0, 1, 0)
            end
        end
    end
    
    character:WaitForChild("Humanoid").HealthChanged:Connect(updateHealth)
    updateHealth()
    
    -- Box ESP
    local box = Instance.new("Frame")
    box.Name = "Box"
    box.BackgroundTransparency = 0.8
    box.BackgroundColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    box.BorderSizePixel = 1
    box.BorderColor3 = Color3.new(1, 1, 1)
    box.Size = UDim2.new(1.5, 0, 2.5, 0)
    box.Position = UDim2.new(-0.25, 0, -0.5, 0)
    box.Parent = espFrame
    
    -- Tracer
    local tracer = Instance.new("Frame")
    tracer.Name = "Tracer"
    tracer.BackgroundColor3 = teamCheck and player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
    tracer.BorderSizePixel = 0
    tracer.Size = UDim2.new(0, 1, 0, 1000)
    tracer.AnchorPoint = Vector2.new(0.5, 1)
    tracer.Position = UDim2.new(0.5, 0, 1, 0)
    tracer.Parent = espFrame
    
    player.CharacterAdded:Connect(function(newChar)
        espGui.Adornee = newChar:WaitForChild("HumanoidRootPart")
        newChar:WaitForChild("Humanoid").HealthChanged:Connect(updateHealth)
        updateHealth()
    end)
    
    player:GetPropertyChangedSignal("Team"):Connect(function()
        if teamCheck then
            espText.TextColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
            box.BackgroundColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
            tracer.BackgroundColor3 = player.Team == speaker.Team and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
        end
    end)
    
    return espGui
end

local function ESP(player, teamCheck)
    if not player.Character then
        player.CharacterAdded:Wait()
    end
    return CreateESP(player, teamCheck)
end

local function ToggleESP(teamCheck)
    if not CHMSenabled then
        ESPenabled = not ESPenabled
        
        if ESPenabled then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= speaker then
                    ESP(player, teamCheck)
                end
            end
            
            Players.PlayerAdded:Connect(function(player)
                if ESPenabled then
                    ESP(player, teamCheck)
                end
            end)
            
            Notifier.new({
                Title = "ESP",
                Content = "ESP has been enabled" .. (teamCheck and " (Team Check)" or ""),
                Duration = 3,
                Icon = "rbxassetid://120245531583106"
            })
        else
            for _, child in pairs(COREGUI:GetChildren()) do
                if string.sub(child.Name, -4) == "_ESP" then
                    child:Destroy()
                end
            end
            
            Notifier.new({
                Title = "ESP",
                Content = "ESP has been disabled",
                Duration = 3,
                Icon = "rbxassetid://120245531583106"
            })
        end
    else
        Notifier.new({
            Title = "ESP",
            Content = "Disable chams (nochams) before using esp",
            Duration = 3,
            Icon = "rbxassetid://120245531583106"
        })
    end
end



local ESPTab = Window:DrawTab({
    Name = "ESP Settings",
    Icon = "eye",
    EnableScrolling = true
})

local ESSettings = ESPTab:DrawSection({
    Name = "ESP Settings",
    Position = 'left'
})

-- ESP Toggles
ESSettings:AddToggle({
    Name = "Enable ESP",
    Flag = "ESP_Enabled",
    Default = false,
    Callback = function(state)
        if state then
            ToggleESP(false)
        else
            ToggleESP(false)
        end
    end
})

ESSettings:AddToggle({
    Name = "Team Check",
    Flag = "ESP_TeamCheck",
    Default = false,
    Callback = function(state)
        if ESPenabled then
            -- Refresh ESP with new team check setting
            ToggleESP(false) -- Turn off
            ToggleESP(state) -- Turn on with new setting
        end
    end
})

ESSettings:AddToggle({
    Name = "Show Names",
    Flag = "ESP_ShowNames",
    Default = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local espText = child:FindFirstChild("Frame"):FindFirstChild("ESPText")
                if espText then
                    espText.Visible = state
                end
            end
        end
    end
})

ESSettings:AddToggle({
    Name = "Show Health Bar",
    Flag = "ESP_ShowHealth",
    Default = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local healthBar = child:FindFirstChild("Frame"):FindFirstChild("HealthBar")
                if healthBar then
                    healthBar.Visible = state
                end
            end
        end
    end
})

ESSettings:AddToggle({
    Name = "Show Box",
    Flag = "ESP_ShowBox",
    Default = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local box = child:FindFirstChild("Frame"):FindFirstChild("Box")
                if box then
                    box.Visible = state
                end
            end
        end
    end
})

ESSettings:AddToggle({
    Name = "Show Tracer",
    Flag = "ESP_ShowTracer",
    Default = true,
    Callback = function(state)
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local tracer = child:FindFirstChild("Frame"):FindFirstChild("Tracer")
                if tracer then
                    tracer.Visible = state
                end
            end
        end
    end
})

-- ESP Colors
local ESPColors = ESPTab:DrawSection({
    Name = "ESP Colors",
    Position = 'right'
})

ESPColors:AddColorPicker({
    Name = "Enemy Color",
    Flag = "ESP_EnemyColor",
    Default = Color3.fromRGB(255, 0, 0),
    Callback = function(color)
        if not ESPenabled or not ConfigManager:GetValue("ESP_TeamCheck") then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local playerName = string.sub(child.Name, 1, -5)
                local player = Players:FindFirstChild(playerName)
                
                if player and player.Team ~= speaker.Team then
                    local frame = child:FindFirstChild("Frame")
                    if frame then
                        local espText = frame:FindFirstChild("ESPText")
                        local box = frame:FindFirstChild("Box")
                        local tracer = frame:FindFirstChild("Tracer")
                        
                        if espText then espText.TextColor3 = color end
                        if box then box.BackgroundColor3 = color end
                        if tracer then tracer.BackgroundColor3 = color end
                    end
                end
            end
        end
    end
})

ESPColors:AddColorPicker({
    Name = "Team Color",
    Flag = "ESP_TeamColor",
    Default = Color3.fromRGB(0, 255, 0),
    Callback = function(color)
        if not ESPenabled or not ConfigManager:GetValue("ESP_TeamCheck") then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local playerName = string.sub(child.Name, 1, -5)
                local player = Players:FindFirstChild(playerName)
                
                if player and player.Team == speaker.Team then
                    local frame = child:FindFirstChild("Frame")
                    if frame then
                        local espText = frame:FindFirstChild("ESPText")
                        local box = frame:FindFirstChild("Box")
                        local tracer = frame:FindFirstChild("Tracer")
                        
                        if espText then espText.TextColor3 = color end
                        if box then box.BackgroundColor3 = color end
                        if tracer then tracer.BackgroundColor3 = color end
                    end
                end
            end
        end
    end
})

ESPColors:AddColorPicker({
    Name = "Text Color",
    Flag = "ESP_TextColor",
    Default = Color3.fromRGB(255, 255, 255),
    Callback = function(color)
        if not ESPenabled then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local frame = child:FindFirstChild("Frame")
                if frame then
                    local espText = frame:FindFirstChild("ESPText")
                    if espText then
                        espText.TextColor3 = color
                    end
                end
            end
        end
    end
})

-- Text Settings
local TextSettings = ESPTab:DrawSection({
    Name = "Text Settings",
    Position = 'right'
})

TextSettings:AddSlider({
    Name = "Text Size",
    Min = 10,
    Max = 30,
    Default = 18,
    Round = 0,
    Flag = "ESP_TextSize",
    Callback = function(value)
        if not ESPenabled then return end
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local frame = child:FindFirstChild("Frame")
                if frame then
                    local espText = frame:FindFirstChild("ESPText")
                    if espText then
                        espText.TextSize = value
                    end
                end
            end
        end
    end
})

TextSettings:AddDropdown({
    Name = "Text Font",
    Default = "SourceSansBold",
    Flag = "ESP_TextFont",
    Values = {"SourceSans", "SourceSansBold", "SourceSansItalic", "Code", "Highway", "SciFi", "Arcade", "Fantasy"},
    Callback = function(value)
        if not ESPenabled then return end
        
        local fontMap = {
            SourceSans = Enum.Font.SourceSans,
            SourceSansBold = Enum.Font.SourceSansBold,
            SourceSansItalic = Enum.Font.SourceSansItalic,
            Code = Enum.Font.Code,
            Highway = Enum.Font.Highway,
            SciFi = Enum.Font.SciFi,
            Arcade = Enum.Font.Arcade,
            Fantasy = Enum.Font.Fantasy
        }
        
        for _, child in pairs(COREGUI:GetChildren()) do
            if string.sub(child.Name, -4) == "_ESP" then
                local frame = child:FindFirstChild("Frame")
                if frame then
                    local espText = frame:FindFirstChild("ESPText")
                    if espText then
                        espText.Font = fontMap[value]
                    end
                end
            end
        end
    end
})

-- Вкладка Slap Battles
local SlapBattlesTab = Window:DrawTab({
    Name = "Slap Battles",
    Icon = "hand",
    EnableScrolling = true
})

local SlapBattlesSection = SlapBattlesTab:DrawSection({
    Name = "Эксклюзивные скрипты",
    Position = "left"
})

SlapBattlesSection:AddButton({
    Name = "Хитбоксы",
    Description = "Увеличивает зону поражения",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Bilmemi/hitbox2/main/op")
    end
})

SlapBattlesSection:AddButton({
    Name = "Авто-автобус",
    Description = "Автоматически использует способность автобуса",
    Callback = function()
        while task.wait(6) do
            game:GetService("ReplicatedStorage"):WaitForChild("busmoment"):FireServer()
        end
    end
})

SlapBattlesSection:AddButton({
    Name = "Бесконечное Уно",
    Description = "Постоянно активирует способность Уно",
    Callback = function()
        while task.wait(6) do
            game:GetService("ReplicatedStorage"):WaitForChild("ReverseAbility"):FireServer()
        end
    end
})

SlapBattlesSection:AddButton({
    Name = "Аура убийства",
    Description = "Автоматическая атака ближайших игроков",
    Callback = function()
        local json = game:HttpGet("https://raw.githubusercontent.com/LeoKholYt/lkhub/main/list.json")
        local jsonData = game:GetService("HttpService"):JSONDecode(json)
        local url = jsonData[tostring(game.PlaceId)] or "universal.lua"
        url = url.s or url
        Functions.LoadScript("https://lkhub.net/s/"..url)
    end
})

-- Вкладка Lumber Tycoon 2
local LumberTycoonTab = Window:DrawTab({
    Name = "Lumber Tycoon 2",
    Icon = "tree-pine",
    EnableScrolling = true
})

local LumberTycoonSection = LumberTycoonTab:DrawSection({
    Name = "Фарм-скрипты",
    Position = "left"
})

LumberTycoonSection:AddButton({
    Name = "Kron Hub",
    Description = "Лучший скрипт для автоматизации",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/DevKron/Kron_Hub/main/version_1.0")
    end
})

LumberTycoonSection:AddButton({
    Name = "LT2 LuaWare",
    Description = "Оптимизированный скрипт для мобильных устройств",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/frencaliber/LuaWareLoader.lw/main/luawareloader.wtf")
    end
})

LumberTycoonSection:AddButton({
    Name = "LT2 Better Script",
    Description = "Улучшенная версия для ПК",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/Butterisgood/Butter/main/Root2.lua")
    end
})

LumberTycoonSection:AddButton({
    Name = "Удалить защитные стены",
    Description = "Убирает защитные барьеры",
    Callback = function()
        while task.wait() do
            game:GetService("Workspace").Effects:Destroy()
        end
    end
})

-- Вкладка MM2
local MM2Tab = Window:DrawTab({
    Name = "Murder Mystery 2",
    Icon = "sword",
    EnableScrolling = true
})

local MM2Section = MM2Tab:DrawSection({
    Name = "Скрипты для MM2",
    Position = "left"
})

MM2Section:AddButton({
    Name = "Лучший скрипт для MM2",
    Description = "Различные функции для Murder Mystery 2",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/FOGOTY/mm2-piano-reborn/main/scr")
    end
})

-- Вкладка Огайо
local OhioTab = Window:DrawTab({
    Name = "Огайо",
    Icon = "map",
    EnableScrolling = true
})

local OhioSection = OhioTab:DrawSection({
    Name = "Функции для Огайо",
    Position = "left"
})

OhioSection:AddButton({
    Name = "ESP игроков",
    Description = "Показывает игроков через стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

OhioSection:AddButton({
    Name = "Авто-фарм хлама V2",
    Description = "Автоматически собирает ресурсы",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/HNwdknXk")
    end
})

OhioSection:AddButton({
    Name = "Автофарм банкоматов",
    Description = "Автоматический сбор денег",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/szznrYvx")
    end
})

OhioSection:AddButton({
    Name = "ТП по CTRL+Клик",
    Description = "Телепортация к месту клика",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/icB69Hhf")
    end
})

OhioSection:AddButton({
    Name = "ТП к местам",
    Description = "Быстрая телепортация по локациям",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/nrJ7cVcJ")
    end
})

OhioSection:AddButton({
    Name = "Мини хаб",
    Description = "Коллекция скриптов для Огайо",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/fef2FzGc")
    end
})

OhioSection:AddButton({
    Name = "Скрипт для Ohio",
    Description = "Универсальный скрипт для Ohio",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/JENqZVm5")
    end
})

-- Вкладка Kat
local KatTab = Window:DrawTab({
    Name = "Kat",
    Icon = "contact",
    EnableScrolling = true
})

local KatSection = KatTab:DrawSection({
    Name = "Функции для Kat",
    Position = "left"
})

KatSection:AddSlider({
    Name = "Скорость передвижения",
    Description = "Настройка скорости персонажа",
    Min = 0,
    Max = 25,
    Default = 16,
    Callback = function(v) _G.Walk = v end
})

KatSection:AddSlider({
    Name = "Прыгучесть",
    Description = "Настройка высоты прыжка",
    Min = 0,
    Max = 200,
    Default = 50,
    Callback = function(v)
        getgenv().JumpPowerValue = v
        pcall(function()
            local humanoid = Player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then humanoid.JumpPower = v end
        end)
    end
})

KatSection:AddSlider({
    Name = "Поле зрения",
    Description = "Настройка угла обзора камеры",
    Min = 0,
    Max = 120,
    Default = 70,
    Callback = Functions.FOV
})

KatSection:AddButton({
    Name = "Удалить стены",
    Description = "Убирает препятствия на карте",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/FBKJTUyw")
    end
})

KatSection:AddButton({
    Name = "Kill Aura",
    Description = "Автоматическая атака врагов",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/mk1ge1hm")
    end
})

KatSection:AddButton({
    Name = "ESP",
    Description = "Видеть сквозь стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

KatSection:AddButton({
    Name = "Падение на месте (R)",
    Description = "Падать без перемещения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/CTUaCKN1")
    end
})

-- Вкладка Jailbreak
local JailbreakTab = Window:DrawTab({
    Name = "Jailbreak",
    Icon = "shield",
    EnableScrolling = true
})

local JailbreakSection = JailbreakTab:DrawSection({
    Name = "Функции для Jailbreak",
    Position = "left"
})

JailbreakSection:AddButton({
    Name = "Автофарм",
    Description = "Автоматический сбор денег",
    Callback = function()
        Functions.LoadScript("http://scripts.projectauto.xyz/AutoRobV5")
    end
})

JailbreakSection:AddButton({
    Name = "Ускорение",
    Description = "Увеличение скорости передвижения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/P8VjFPsQ")
    end
})

JailbreakSection:AddButton({
    Name = "ESP",
    Description = "Видеть сквозь стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/r97SAaUa")
    end
})

JailbreakSection:AddButton({
    Name = "ТП по CTRL+Клик",
    Description = "Телепортация к выбранной точке",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/icB69Hhf")
    end
})

-- Вкладка A Dusty Trip
local DustyTripTab = Window:DrawTab({
    Name = "A Dusty Trip",
    Icon = "car",
    EnableScrolling = true
})

local DustyTripSection = DustyTripTab:DrawSection({
    Name = "Функции для A Dusty Trip",
    Position = "left"
})

DustyTripSection:AddButton({
    Name = "Скорость 5000",
    Description = "Экстремальная скорость передвижения",
    Callback = function()
        _G.Walk = 5000
        _G.WalkSpeed = true
    end
})

DustyTripSection:AddButton({
    Name = "Скорость 1000",
    Description = "Очень высокая скорость",
    Callback = function()
        _G.Walk = 1000
        _G.WalkSpeed = true
    end
})

DustyTripSection:AddButton({
    Name = "Скорость 50",
    Description = "Умеренное ускорение",
    Callback = function()
        _G.Walk = 50
        _G.WalkSpeed = true
    end
})

DustyTripSection:AddButton({
    Name = "Скорость 25",
    Description = "Небольшое ускорение",
    Callback = function()
        _G.Walk = 25
        _G.WalkSpeed = true
    end
})

DustyTripSection:AddButton({
    Name = "Полёт на машине (V)",
    Description = "Летать на транспорте",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/9bNj1EcR")
    end
})

-- Вкладка Build A Boat
local BuildBoatTab = Window:DrawTab({
    Name = "Build A Boat",
    Icon = "sailboat",
    EnableScrolling = true
})

local BuildBoatSection = BuildBoatTab:DrawSection({
    Name = "Функции для Build A Boat",
    Position = "left"
})

BuildBoatSection:AddButton({
    Name = "Автофарм",
    Description = "Автоматический сбор ресурсов",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/24e7Skmv")
    end
})

BuildBoatSection:AddButton({
    Name = "Хаб-скрипт",
    Description = "Пароль: N-314159",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/novakoolhub/Scripts/main/Scripts/NovBoatR1")
    end
})

BuildBoatSection:AddButton({
    Name = "Полёт (F)",
    Description = "Активировать возможность летать",
    Callback = function()
        loadstring("\108\111\97\100\115\116\114\105\110\103\40\103\97\109\101\58\72\116\116\112\71\101\116\40\40\39\104\116\116\112\115\58\47\47\103\105\115\116\46\103\105\116\104\117\98\117\115\101\114\99\111\110\116\101\110\116\46\99\111\109\47\109\101\111\122\111\110\101\89\84\47\98\102\48\51\55\100\102\102\57\102\48\97\55\48\48\49\55\51\48\52\100\100\100\54\55\102\100\99\100\51\55\48\47\114\97\119\47\101\49\52\101\55\52\102\52\50\53\98\48\54\48\100\102\53\50\51\51\52\51\99\102\51\48\98\55\56\55\48\55\52\101\98\51\99\53\100\50\47\97\114\99\101\117\115\37\50\53\50\48\120\37\50\53\50\48\102\108\121\37\50\53\50\48\50\37\50\53\50\48\111\98\102\108\117\99\97\116\111\114\39\41\44\116\114\117\101\41\41\40\41\10\10")()
    end
})

-- Вкладка Вырасти сад
local GrowGardenTab = Window:DrawTab({
    Name = "Вырасти сад",
    Icon = "flower",
    EnableScrolling = true
})

local GrowGardenSection = GrowGardenTab:DrawSection({
    Name = "Функции для Вырасти сад",
    Position = "left"
})

GrowGardenSection:AddButton({
    Name = "Автофарм",
    Description = "Автоматический сбор растений",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/UZU3cmQZ")
    end
})

GrowGardenSection:AddButton({
    Name = "Хаб скриптов",
    Description = "Коллекция функций для игры",
    Callback = function()
        Functions.LoadScript("https://raw.githubusercontent.com/ameicaa1/Grow-a-Garden/main/Grow_A_Garden.lua")
    end
})

GrowGardenSection:AddButton({
    Name = "Ускорение",
    Description = "Увеличение скорости передвижения",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/Zzqq3U0u")
    end
})

-- Вкладка Dig to Earth's CORE
local DigToCoreTab = Window:DrawTab({
    Name = "Dig to Earth's CORE",
    Icon = "shovel",
    EnableScrolling = true
})

local DigToCoreSection = DigToCoreTab:DrawSection({
    Name = "Функции для Dig to Earth's CORE",
    Position = "left"
})

DigToCoreSection:AddButton({
    Name = "Выдать деньги",
    Description = "Добавляет игровую валюту",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.AddRewardEvent:FireServer("Cash", 241561515)
    end
})

DigToCoreSection:AddButton({
    Name = "Выдать спины",
    Description = "Добавляет спины для рулетки",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.AddRewardEvent:FireServer("Spins", 51)
    end
})

DigToCoreSection:AddButton({
    Name = "Выдать петов",
    Description = "Добавляет редких питомцев",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.PetCageEvent:FireServer("Lava Dominus")
    end
})

DigToCoreSection:AddButton({
    Name = "Выдать 25к",
    Description = "Добавляет 25000 денег",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.SpinPrizeEvent:FireServer(2)
    end
})

DigToCoreSection:AddButton({
    Name = "Выдать 375 гемов",
    Description = "Добавляет 375 гемов",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.SpinPrizeEvent:FireServer(5)
    end
})

DigToCoreSection:AddButton({
    Name = "Выдать спины",
    Description = "Добавляет спины",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.SpinPrizeEvent:FireServer(3)
    end
})

DigToCoreSection:AddButton({
    Name = "X10 МОНЕТ",
    Description = "Увеличивает доход в 10 раз",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.SpinPrizeEvent:FireServer(8)
    end
})

-- Вкладка Human Kebabs
local HumanKebabsTab = Window:DrawTab({
    Name = "Human Kebabs",
    Icon = "meh",
    EnableScrolling = true
})

local HumanKebabsSection = HumanKebabsTab:DrawSection({
    Name = "Функции для Human Kebabs",
    Position = "left"
})

HumanKebabsSection:AddButton({
    Name = "Kill All",
    Description = "Автоматически атакует всех игроков",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local running = true
        
        _G.StopAutoSkewer = function()
            running = false
            return "Скрипт остановлен!"
        end
        
        task.spawn(function()
            while running do
                task.wait(0.1)
                for _, target in ipairs(game:GetService("Players"):GetPlayers()) do
                    if target ~= player and target.Character then
                        game:GetService("ReplicatedStorage").Remotes.Client.SkewerHit:FireServer(target)
                    end
                end
            end
        end)
    end
})

HumanKebabsSection:AddButton({
    Name = "Остановить Kill All",
    Description = "Прекращает автоматическую атаку",
    Callback = function()
        if _G.StopAutoSkewer then
            _G.StopAutoSkewer()
        end
    end
})

-- Вкладка Baseplate
local BaseplateTab = Window:DrawTab({
    Name = "Baseplate",
    Icon = "meh",
    EnableScrolling = true
})

local BaseplateSection = BaseplateTab:DrawSection({
    Name = "Функции для Baseplate",
    Position = "left"
})

BaseplateSection:AddButton({
    Name = "Скрипт для Baseplate",
    Description = "Различные функции для Baseplate",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/aAYx0WZG")
    end
})

-- Вкладка ESP
local EspTab = Window:DrawTab({
    Name = "ESP",
    Icon = "meh",
    EnableScrolling = true
})

local EspSection = EspTab:DrawSection({
    Name = "Функции ESP",
    Position = "left"
})

EspSection:AddButton({
    Name = "ESP игроков",
    Description = "Показывает игроков через стены",
    Callback = function()
        Functions.LoadScript("https://pastebin.com/raw/yKvD4NzC")
    end
})

-- Вкладка Aimbot
local AimbotTab = Window:DrawTab({
    Name = "Aimbot",
    Icon = "crosshair",
    EnableScrolling = true
})

local AimbotSection = AimbotTab:DrawSection({
    Name = "Настройки Aimbot",
    Position = "left"
})

local aimbotEnabled = false
local aimParts = {"Head"}
local aimFov = 100
local smoothing = 0.05
local prediction = 0.1
local wallCheck = true
local teamCheck = false

AimbotSection:AddToggle({
    Name = "Включить Aimbot",
    Default = false,
    Callback = function(v)
        aimbotEnabled = v
    end
})

AimbotSection:AddDropdown({
    Name = "Часть тела",
    Values = {"Head", "HumanoidRootPart", "Torso"},
    Default = "Head",
    Callback = function(v)
        aimParts = {v}
    end
})

AimbotSection:AddSlider({
    Name = "Поле зрения",
    Min = 10,
    Max = 500,
    Default = 100,
    Callback = function(v)
        aimFov = v
    end
})

AimbotSection:AddSlider({
    Name = "Сглаживание",
    Min = 1,
    Max = 100,
    Default = 5,
    Callback = function(v)
        smoothing = v / 100
    end
})

AimbotSection:AddSlider({
    Name = "Предсказание",
    Min = 0,
    Max = 20,
    Default = 10,
    Callback = function(v)
        prediction = v / 100
    end
})

AimbotSection:AddToggle({
    Name = "Проверка стен",
    Default = true,
    Callback = function(v)
        wallCheck = v
    end
})

AimbotSection:AddToggle({
    Name = "Проверка команды",
    Default = false,
    Callback = function(v)
        teamCheck = v
    end
})

-- Вкладка Настройки
local SettingsTab = Window:DrawTab({
    Name = "Настройки",
    Icon = "settings",
    Type = "Single"
})

local UISettings = SettingsTab:DrawSection({
    Name = "Настройки интерфейса",
    Position = "left"
})

UISettings:AddToggle({
    Name = "Всегда показывать UI",
    Description = "Отключает автоматическое скрытие интерфейса",
    Default = false,
    Callback = function(v)
        Window.AlwayShowTab = v
    end
})

UISettings:AddColorPicker({
    Name = "Цвет интерфейса",
    Description = "Изменяет основной цвет элементов",
    Default = Compkiller.Colors.Highlight,
    Callback = function(v)
        Compkiller.Colors.Highlight = v
        Compkiller:RefreshCurrentColor()
    end
})

UISettings:AddButton({
    Name = "Сохранить настройки",
    Callback = function()
        ConfigManager:Save()
        Notifier.new({
            Title = "Успех",
            Content = "Настройки сохранены!",
            Duration = 3
        })
    end
})

UISettings:AddButton({
    Name = "Загрузить настройки",
    Callback = function()
        ConfigManager:Load()
        Notifier.new({
            Title = "Успех",
            Content = "Настройки загружены!",
            Duration = 3
        })
    end
})

-- Конфигурация
local ConfigUI = Window:DrawConfig({
    Name = "Конфигурация",
    Icon = "folder",
    Config = ConfigManager
})

ConfigUI:Init()

-- Автозагрузка
task.spawn(function()
    task.wait(1)
    ConfigManager:Load()
end)
