local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
local autoClickEnabled = false
local connection = nil

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞ —ç–∫—Ä–∞–Ω–∞
local function getScreenCenter()
    local viewportSize = workspace.CurrentCamera.ViewportSize
    return Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
end

-- –§—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–ª–∏–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞
local function performCenterClick()
    local centerPos = getScreenCenter()
    
    -- –ù–∞–∂–∏–º–∞–µ–º –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏
    VirtualInputManager:SendMouseButtonEvent(
        centerPos.X,
        centerPos.Y,
        0, -- –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
        true, -- –ù–∞–∂–∞—Ç–∏–µ –≤–Ω–∏–∑
        game,
        0
    )
    
    -- –ö–æ—Ä–æ—Ç–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    task.wait(0.05)
    
    -- –û—Ç–ø—É—Å–∫–∞–µ–º –∫–Ω–æ–ø–∫—É
    VirtualInputManager:SendMouseButtonEvent(
        centerPos.X,
        centerPos.Y,
        0, -- –õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
        false, -- –ù–∞–∂–∞—Ç–∏–µ –≤–≤–µ—Ä—Ö
        game,
        0
    )
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª–∏–∫–µ—Ä–∞
local function startAutoClicker()
    if connection then
        connection:Disconnect()
    end
    
    autoClickEnabled = true
    print("‚úÖ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤–∫–ª—é—á–µ–Ω - –Ω–∞–∂–∞—Ç–∏–µ –≤ —Ü–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞")
    
    connection = RunService.Heartbeat:Connect(function()
        if autoClickEnabled then
            performCenterClick()
        end
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª–∏–∫–µ—Ä–∞
local function stopAutoClicker()
    autoClickEnabled = false
    if connection then
        connection:Disconnect()
        connection = nil
    end
    print("‚ùå –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤—ã–∫–ª—é—á–µ–Ω")
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.L then
        if autoClickEnabled then
            stopAutoClicker()
        else
            startAutoClicker()
        end
    end
end)

-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
print("üéØ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üìå –ù–∞–∂–º–∏—Ç–µ L –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è")
print("üìç –ö–ª–∏–∫–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞: " .. tostring(getScreenCenter()))

-- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
getgenv().StartAutoClick = startAutoClicker
getgenv().StopAutoClick = stopAutoClicker
getgenv().ToggleAutoClick = function()
    if autoClickEnabled then
        stopAutoClicker()
    else
        startAutoClicker()
    end
end
