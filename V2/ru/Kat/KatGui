-- Загрузка библиотеки Kavo UI
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()

-- Создание окна
local Window = Library.CreateLib("1Qlua", "DarkTheme")

-- Координаты для телепортации
local TARGET_POSITION = Vector3.new(100, 1000, 200)
local TARGET2_POSITION = Vector3.new(100, 1000, 180)
local TARGET3_POSITION = Vector3.new(100, 1000, 183)

-- Переменные для контроля телепортации
local teleportEnabled = false
local teleport2Enabled = false
local teleportConnection
local teleport2Connection

-- Переменные для контроля камеры
local cameraLockEnabled = false
local cameraConnection
local selectedPlayer = nil

-- Функция для получения списка игроков
local function getPlayers()
    local players = {}
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            table.insert(players, player.Name)
        end
    end
    return players
end

-- Функция направления камеры на игрока
local function lockCameraToPlayer()
    if not cameraLockEnabled or not selectedPlayer then return end
    
    local targetPlayer = game.Players:FindFirstChild(selectedPlayer)
    if not targetPlayer then return end
    
    local character = targetPlayer.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    local camera = game.Workspace.CurrentCamera
    camera.CFrame = CFrame.new(camera.CFrame.Position, humanoidRootPart.Position)
end

-- Функции телепортации
local function teleportToPosition()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoidRootPart.CFrame = CFrame.new(TARGET_POSITION)
end

local function teleport2ToPosition()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoidRootPart.CFrame = CFrame.new(TARGET2_POSITION)
end

local function teleport3ToPosition()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoidRootPart.CFrame = CFrame.new(TARGET3_POSITION)
end

-- Создание вкладок
local KatTab = Window:NewTab("Kat ❤️")
local FarmAltTab = Window:NewTab("Farm alt❤️")

-- Создание секций для вкладки Kat
local KatSection = KatTab:NewSection("Kat")
local KatRightSection = KatTab:NewSection("Kadt")

-- Создание секций для вкладки Farm Alt
local FarmLeftSection = FarmAltTab:NewSection("для фарм аккаунтов")
local FarmRightSection = FarmAltTab:NewSection("для не фарм аккаунтов")

-- Добавление элементов в секцию Kat
KatSection:NewLabel("Фарм бокс")
KatSection:NewLabel("Фарм боксов, запускается и оно само фармит!")

KatSection:NewButton("Фарм боксов!", "Запускает фарм боксов", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/FARM/farmbox"))()
end)

KatSection:NewLabel("Килл алл")
KatSection:NewLabel("Килл алл, чтобы выключить нажмите R!")

KatSection:NewButton("Килл алл!", "Запускает kill all", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/script/kill%20all"))()
end)

-- Добавление элементов в правую секцию Kat
KatRightSection:NewLabel("Ай бот!")
KatRightSection:NewLabel("Ай бот, чтобы выключить нажмите E!")

KatRightSection:NewButton("Ай бот!", "Запускает AI бота", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/AIBOT/Kat/AIBOT"))()
end)

KatRightSection:NewLabel("Айм!")
KatRightSection:NewLabel("Айм, чтобы убить надо минимально прицелиться на противника, и нажать на E")

KatRightSection:NewButton("Айм!", "Запускает аим", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/test1QLUA/QLUASCRIPT/refs/heads/main/A'))()
end)

-- Добавление элементов в левую секцию Farm Alt
FarmLeftSection:NewLabel("Координаты телепортации 1")
FarmLeftSection:NewLabel(string.format("X=%d, Y=%d, Z=%d", TARGET_POSITION.X, TARGET_POSITION.Y, TARGET_POSITION.Z))

-- Toggle для бесконечной телепортации 1
FarmLeftSection:NewToggle("Бесконечная телепортация", "Включает бесконечную телепортацию", function(state)
    teleportEnabled = state
    
    if state then
        print("[Телепортация] Бесконечная телепортация включена!")
        
        teleportConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if teleportEnabled then
                pcall(teleportToPosition)
            end
        end)
    else
        print("[Телепортация] Бесконечная телепортация выключена!")
        
        if teleportConnection then
            teleportConnection:Disconnect()
            teleportConnection = nil
        end
    end
end)

FarmLeftSection:NewLabel("авто убийство с пистолета!")
FarmLeftSection:NewLabel("Чтобы выключить нажмите Q")

FarmLeftSection:NewButton("авто убийство с пистолета!", "Запускает авто убийство", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/V2/ru/Kat/aimd'))()
end)

FarmLeftSection:NewLabel("авто доставания пистолета!")
FarmLeftSection:NewButton("авто доставания пистолета!", "Автоматически достает пистолет", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/AIBOT/Kat/Revolver'))()
end)

FarmLeftSection:NewButton("анти афк", "Включите со всех аккаунтов", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/test1QLUA/QLUASCRIPT/refs/heads/main/farm/antiafk'))()
end)

-- Создание Dropdown для выбора игрока
local playersList = getPlayers()
local dropdown = FarmLeftSection:NewDropdown("Выберите игрока", "Для направления камеры", playersList, function(currentOption)
    selectedPlayer = currentOption
    print("[Камера] Выбран игрок: " .. currentOption)
end)

-- Обновление списка игроков
game.Players.PlayerAdded:Connect(function()
    dropdown:Refresh(getPlayers())
end)

game.Players.PlayerRemoving:Connect(function()
    dropdown:Refresh(getPlayers())
end)

-- Toggle для направления камеры
FarmLeftSection:NewToggle("Направлять камеру на игрока", "Направляет камеру на выбранного игрока", function(state)
    cameraLockEnabled = state
    
    if state then
        if not selectedPlayer then
            print("[Ошибка] Сначала выберите игрока!")
            return
        end
        
        print("[Камера] Камера направлена на: " .. selectedPlayer)
        
        cameraConnection = game:GetService("RunService").RenderStepped:Connect(function()
            if cameraLockEnabled then
                pcall(lockCameraToPlayer)
            end
        end)
    else
        print("[Камера] Направление камеры выключено")
        
        if cameraConnection then
            cameraConnection:Disconnect()
            cameraConnection = nil
        end
    end
end)

FarmLeftSection:NewLabel("Управление камерой")
FarmLeftSection:NewLabel("Выберите игрока и включите тоггл для направления камеры")

FarmLeftSection:NewLabel("Убийство с ножа!")
FarmLeftSection:NewLabel("Тут настройка для убийства с ножа!")

FarmLeftSection:NewLabel("авто доставания ножа!")
FarmLeftSection:NewButton("авто доставания ножа!", "Автоматически достает нож", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/FARM/item'))()
end)

FarmLeftSection:NewLabel("авто кликер!")
FarmLeftSection:NewLabel("чтобы выключить или включить нажмите L")

FarmLeftSection:NewButton("авто Кликер!", "Запускает авто кликер", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/1Qlua-RBXscript/1qlua/refs/heads/main/V2/ru/Kat/spamklick'))()
end)

-- Добавление элементов в правую секцию Farm Alt
FarmRightSection:NewLabel("Координаты телепортации 2")
FarmRightSection:NewLabel(string.format("X=%d, Y=%d, Z=%d", TARGET2_POSITION.X, TARGET2_POSITION.Y, TARGET2_POSITION.Z))

-- Toggle для бесконечной телепортации 2
FarmRightSection:NewToggle("Бесконечная телепортация 2", "Включает бесконечную телепортацию на позицию 2", function(state)
    teleport2Enabled = state
    
    if state then
        print("[Телепортация] Бесконечная телепортация 2 включена!")
        
        teleport2Connection = game:GetService("RunService").Heartbeat:Connect(function()
            if teleport2Enabled then
                pcall(teleport2ToPosition)
            end
        end)
    else
        print("[Телепортация] Бесконечная телепортация 2 выключена!")
        
        if teleport2Connection then
            teleport2Connection:Disconnect()
            teleport2Connection = nil
        end
    end
end)

-- Дополнительная телепортация 3 (если нужно)
FarmRightSection:NewToggle("Бесконечная телепортация 3", "Включает бесконечную телепортацию на позицию 3", function(state)
    local teleport3Enabled = state
    
    if state then
        print("[Телепортация] Бесконечная телепортация 3 включена!")
        
        local connection = game:GetService("RunService").Heartbeat:Connect(function()
            if teleport3Enabled then
                pcall(teleport3ToPosition)
            end
        end)
        
        -- Сохраняем соединение для отключения
        getgenv().Teleport3Connection = connection
    else
        print("[Телепортация] Бесконечная телепортация 3 выключена!")
        
        if getgenv().Teleport3Connection then
            getgenv().Teleport3Connection:Disconnect()
            getgenv().Teleport3Connection = nil
        end
    end
end)

-- Кнопка для скрытия/показа UI (опционально)
KatTab:NewSection("Настройки UI")
KatTab:NewKeybind("Скрыть/Показать UI", "Показывает/скрывает интерфейс", Enum.KeyCode.LeftAlt, function()
    Library:ToggleUI()
end)

print("1Qlua UI загружен успешно! Нажмите LeftAlt чтобы скрыть/показать интерфейс.")
