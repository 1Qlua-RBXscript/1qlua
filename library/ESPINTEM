local espColor = Color3.fromRGB(0, 255, 0) -- –ó–µ–ª—ë–Ω—ã–π
local espTransparency = 0.5 -- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

-- –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–π –ø–æ–¥—Å–≤–µ—Ç–∫–∏
local function clearESP()
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj:FindFirstChild("ESP_Adornment") then
            obj.ESP_Adornment:Destroy()
        end
    end
end

-- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ–±—ä–µ–∫—Ç–∞ –∏ –µ–≥–æ –ø–æ—Ç–æ–º–∫–æ–≤
local function highlightObject(target)
    if not target then return end

    for _, descendant in pairs(target:GetDescendants()) do
        if descendant:IsA("BasePart") then
            local esp = Instance.new("BoxHandleAdornment")
            esp.Name = "ESP_Adornment"
            esp.Adornee = descendant
            esp.AlwaysOnTop = true
            esp.ZIndex = 1
            esp.Size = descendant.Size + Vector3.new(0.1, 0.1, 0.1)
            esp.Transparency = espTransparency
            esp.Color3 = espColor
            esp.Parent = descendant
        end
    end

    target.DescendantAdded:Connect(function(descendant)
        if descendant:IsA("BasePart") then
            task.wait(0.1)
            local esp = Instance.new("BoxHandleAdornment")
            esp.Name = "ESP_Adornment"
            esp.Adornee = descendant
            esp.AlwaysOnTop = true
            esp.ZIndex = 1
            esp.Size = descendant.Size + Vector3.new(0.1, 0.1, 0.1)
            esp.Transparency = espTransparency
            esp.Color3 = espColor
            esp.Parent = descendant
        end
    end)
end

-- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
local function unhighlightObject(target)
    if not target then return end

    for _, descendant in pairs(target:GetDescendants()) do
        if descendant:IsA("BasePart") and descendant:FindFirstChild("ESP_Adornment") then
            descendant.ESP_Adornment:Destroy()
        end
    end
end

-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ –∏–Ω–∂–µ–∫—Ç–æ—Ä–∞
getgenv().ESP = function(objectPath)
    local success, target = pcall(function()
        return loadstring("return " .. objectPath)()
    end)

    if not success or not target then
        warn("‚ùå –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: " .. objectPath)
        return false
    end

    clearESP() -- –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É
    highlightObject(target) -- –í–∫–ª—é—á–∞–µ–º –Ω–æ–≤—É—é
    print("‚úÖ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è: " .. objectPath)
    return true
end

getgenv().UNESP = function(objectPath)
    local success, target = pcall(function()
        return loadstring("return " .. objectPath)()
    end)

    if not success or not target then
        warn("‚ùå –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: " .. objectPath)
        return false
    end

    unhighlightObject(target) -- –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
    print("üö´ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è: " .. objectPath)
    return true
end

-- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
-- ESP("workspace.Base") -- –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É
-- UNESP("workspace.Base") -- –í—ã–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É
