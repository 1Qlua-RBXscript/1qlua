local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
local PART_SETTINGS = {
    Size = Vector3.new(4, 1, 4),
    Color = Color3.fromRGB(0, 255, 0),
    Material = Enum.Material.Plastic,
    Anchored = true,
    CanCollide = true,
    ForwardOffset = 5,
    UpOffset = 0,
    RightOffset = 0
}

-- –û–±–Ω–æ–≤–ª—è–µ–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
local Character
local HumanoidRootPart

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
local function UpdateCharacter()
    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
    
    LocalPlayer.CharacterAdded:Connect(function(newChar)
        Character = newChar
        HumanoidRootPart = newChar:WaitForChild("HumanoidRootPart")
    end)
end

UpdateCharacter()

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–∞—Å—Ç–∏
getgenv().PART_SETTINGS = function(settings)
    if settings.Size then PART_SETTINGS.Size = settings.Size end
    if settings.Color then PART_SETTINGS.Color = settings.Color end
    if settings.Material then PART_SETTINGS.Material = settings.Material end
    if settings.Anchored ~= nil then PART_SETTINGS.Anchored = settings.Anchored end
    if settings.CanCollide ~= nil then PART_SETTINGS.CanCollide = settings.CanCollide end
    if settings.ForwardOffset then PART_SETTINGS.ForwardOffset = settings.ForwardOffset end
    if settings.UpOffset then PART_SETTINGS.UpOffset = settings.UpOffset end
    if settings.RightOffset then PART_SETTINGS.RightOffset = settings.RightOffset end
    
    print("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã")
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Å—Ç–∏
getgenv().ADDPART = function()
    -- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
    if not Character or not HumanoidRootPart or not Character.Parent then
        UpdateCharacter()
    end

    -- –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —á–∞—Å—Ç—å
    local part = Instance.new("Part")
    part.Name = "PlayerMadePart_" .. os.time()
    part.Size = PART_SETTINGS.Size
    part.Color = PART_SETTINGS.Color
    part.Material = PART_SETTINGS.Material
    part.Anchored = PART_SETTINGS.Anchored
    part.CanCollide = PART_SETTINGS.CanCollide
    
    -- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –ø–µ—Ä–µ–¥ –∏–≥—Ä–æ–∫–æ–º
    local offset = Vector3.new(
        PART_SETTINGS.RightOffset,
        PART_SETTINGS.UpOffset,
        -PART_SETTINGS.ForwardOffset
    )
    part.CFrame = HumanoidRootPart.CFrame * CFrame.new(offset)
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∏—Ä
    part.Parent = Workspace
    
    print(string.format(
        "‚úÖ –°–æ–∑–¥–∞–Ω–∞ —á–∞—Å—Ç—å %s (–†–∞–∑–º–µ—Ä: %s, –¶–≤–µ—Ç: RGB(%d,%d,%d))",
        part.Name,
        tostring(PART_SETTINGS.Size),
        PART_SETTINGS.Color.r * 255,
        PART_SETTINGS.Color.g * 255,
        PART_SETTINGS.Color.b * 255
    ))
    
    return part
end

print("üõ†Ô∏è –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Å—Ç–µ–π –≥–æ—Ç–æ–≤–∞!")
print("ADDPART() - —Å–æ–∑–¥–∞—Ç—å —á–∞—Å—Ç—å –ø–µ—Ä–µ–¥ –∏–≥—Ä–æ–∫–æ–º")
print([[PART_SETTINGS({
    Size = Vector3.new(5, 2, 5),
    Color = Color3.fromRGB(255, 0, 0),
    ForwardOffset = 3,
    Material = Enum.Material.Neon
})]])
